<!DOCTYPE html>
<html>
<head>
    <title>PSNDTB</title>
    <meta charset="utf-8">

    <!-- All STYLES -->
    <!-- Kendo UI Styles -->
    <link href="kendo/examples/content/shared/styles/examples-offline.css" rel="stylesheet">
    <link href="kendo/styles/kendo.common.min.css" rel="stylesheet">
    <link href="kendo/styles/kendo.rtl.min.css" rel="stylesheet">
    <link href="kendo/styles/kendo.default.min.css" rel="stylesheet">
    <link href="kendo/styles/kendo.default.mobile.min.css" rel="stylesheet">
    <link href="kendo/styles/kendo.bootstrap.min.css" rel="stylesheet" />   
    <link href="kendo/styles/kendo.dataviz.material.min.css" rel="stylesheet" />
    <link href="kendo/styles/kendo.dataviz.bootstrap.min.css" rel="stylesheet" />

    <!-- Start UI CSS Styles -->
    <link rel="stylesheet" href="assets/css/lib/lobipanel/lobipanel.min.css" />
    <link rel="stylesheet" href="assets/css/lib/jqueryui/jquery-ui.min.css" />
    <link rel="stylesheet" href="assets/css/lib/font-awesome/font-awesome.min.css" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="assets/costom-style.css" />

    <!-- ALL JS -->
    <!-- Kendo UI JS -->
    <script src="kendo/js/jquery.min.js"></script>
    <script src="kendo/js/jszip.min.js"></script>
    <script src="kendo/js/kendo.all.min.js"></script>
    <script src="kendo/examples/content/shared/js/console.js"></script>
    <script src="kendo/js/cultures/kendo.culture.km-KH.min.js"></script>

</head>

<body>

<div id="wrapperApplication"></div>
<!-- template section starts -->
<script type="text/x-kendo-template" id="layout">
    <div id="menu"></div>           
    <div id="content" class=" page-content"></div>
</script>
<script type="text/x-kendo-template" id="blank-tmpl">
</script>
<script type="text/x-kendo-template" id="menu-tmpl">
    <header class="site-header">
        <div class="container-fluid">
            <a href="#" class="site-logo">
                <img class="hidden-md-down" src="assets/img/police_logo.png" alt="">
                <img class="hidden-lg-up" src="assets/img/police_logo.png" alt="">
            </a>
    
            <!--<button class="hamburger hamburger--htla">
                <span>toggle menu</span>
            </button>-->
            <div class="site-header-content">
                <div class="site-header-content-in">
                    <div class="site-header-shown">
    
                        <div class="dropdown user-menu">
                            <button class="dropdown-toggle" id="dd-user-menu" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <img src="assets/img/avatar-2-64.png" alt="">
                            </button>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dd-user-menu">
                                <a class="dropdown-item" href="#/users"><span class="font-icon glyphicon glyphicon-user"></span>Profile</a>
                                <a class="dropdown-item" href="#"><span class="font-icon glyphicon glyphicon-cog"></span>Settings</a>
                                <a class="dropdown-item" href="#"><span class="font-icon glyphicon glyphicon-question-sign"></span>Help</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#" onclick="signout();"><span class="font-icon glyphicon glyphicon-log-out"></span>Sign Out</a>
                            </div>
                        </div>
    
                        <button type="button" class="burger-right">
                            <i class="font-icon-menu-addl"></i>
                        </button>
                    </div><!--.site-header-shown-->
    
                    <div class="mobile-menu-right-overlay"></div>
                    <div class="site-header-collapsed">
                        <div class="site-header-collapsed-in">

                            <div class="site-header-search-container">
                                <form class="site-header-search closed">
                                    <input type="text" placeholder="Search"/>
                                    <button type="submit">
                                        <span class="font-icon-search"></span>
                                    </button>
                                    <div class="overlay"></div>
                                </form>
                            </div>

                            <div id="secondary-menu" style="background: none; border: none;"></div>

                        </div><!--.site-header-collapsed-in-->
                    </div><!--.site-header-collapsed-->
                </div><!--site-header-content-in-->
            </div><!--.site-header-content-->
        </div><!--.container-fluid-->
    </header><!--.site-header-->
    <div class="mobile-menu-left-overlay"></div>    
</script>
<script type="text/x-kendo-template" id="index">
    <div class="container">
        <div class="row home-dashbaord">
            <div class="col-sm-12 home-thumbnail">
                <img src="assets/img/plogo.gif" class="img-responsive" alt="Responsive image">
                <p>
                    ប្រព័ន្ធនេះត្រូវបានស្ថាបនាដោយការិយាល័យគ្រប់គ្រងឯកសារនៃនាយកដ្ឋានបុគ្គលិកក្រសួងមហាផ្ទៃ ក្រោមការជួយឧបត្ថមគាំទ្រពី​ 
                    កឧត្តម នាយឧត្តមសេនីយ៍ ចាន់ អ៊ាន អគ្គស្នងការរង ​នៃ អគ្គស្នងការ​ដ្ឋាននគរបាលជាតិ និង​​ជា ប្រធាននាយកដ្ឋានបុគ្គលិក។ 
                    កម្មវិធីនេះត្រូវបាន​​ស្ថាបនាឡើងក្នុង ខែកុម្ភៈ ឆ្នាំ២០១២​​​ ហើយនឹងកំពុងស្ថាបនាបន្ថែមជាបន្តបន្ទាប់។
                </p>
            </div>
            <div class="col-sm-12 home-menu">
                <div class="row">

                    <div class="col-sm-4 col-xl-3">
                        <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/user.png">
                                </div>
                                <div class="task-card-footer">
                                    <h3>ការងារគ្រប់គ្រងអ្នកប្រើប្រាស់កម្មវិធី</h3>
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->

                    <div class="col-sm-4 col-xl-3">
                        <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/setting.png">
                                </div>
                                <div class="task-card-footer">
                                    <h3>ការងាររៀបចំឈ្មោះអង្គភាពចូលក្នុងប្រព័ន្ធ (Administrator)</h3>
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->

                    <div class="col-sm-4 col-xl-3">
                        <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/vip.jpg">
                                </div>
                                <div class="task-card-footer">
                                    <h3>ថ្នាក់ដឹកនាំជាន់ខ្ពស់</h3>
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->

                    <div class="col-sm-4 col-xl-3">
                        <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/police_logo.png">
                                </div>
                                <div class="task-card-footer">
                                     <h3>ស្នងការដ្ឋាននគរបាលរាជធានី-ខេត្ត</h3>
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->
             
                    <div class="col-sm-4 col-xl-3">
                        <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/senatika.png">
                                </div>
                                <div class="task-card-footer">
                                    <h3>សេនាធិការដ្ឋាន និងអង្គភាពចំណុះ</h3>
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->

                    <div class="col-sm-4 col-xl-3">
                        <a href="#/personal_department_home">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/staff_department.png">
                                </div>
                                <div class="task-card-footer">
                                    <h3>នាយកដ្ឋានបុគ្គលិក</h3>
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->

                    <div class="col-sm-4 col-xl-3">
                        <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/kaphea_border.jpg">
                                </div>
                                <div class="task-card-footer">
                                    <h3>នាយកដ្ឋានកណ្តាលនគរបាលព្រំដែន</h3>
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->

                    <div class="col-sm-4 col-xl-3">
                         <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/blank_logo.PNG">
                                </div>
                                <div class="task-card-footer">
                                    <h3>នាយកដ្ឋានកណ្តាលសណ្តាប់ធ្នាប់សាធារណៈ</h3>        
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->
               
                    <div class="col-sm-4 col-xl-3">
                         <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/justict.jpg">
                                </div>
                                <div class="task-card-footer">
                                    <h3>នាយកដ្ឋានកណ្តាលនគរបាលយុត្តិធម៌</h3>         
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->

                    <div class="col-sm-4 col-xl-3">
                        <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/security_dep.jpg">
                                </div>
                                <div class="task-card-footer">
                                    <h3>នាយកដ្ឋានកណ្តាលសន្តិសុខ</h3>        
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->

                    <div class="col-sm-4 col-xl-3">
                         <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/guest.jpg">
                                </div>
                                <div class="task-card-footer">
                                    <h3>ទំព័រសាកល្បង</h3>       
                                </div>
                            </section>
                        </a>
                    </div><!--.col--> 

                </div>           
            </div>
        </div>
    </div>
</script>
<script type="text/x-kendo-template" id="users">
    <div class="container">         
        <div class="wrapper-background">
            <div id="example" class="new-staff">
                <div>
                    <fieldset>
                      <legend>Sign up form</legend>
                      <div>
                        <label for="email">Email:</label>
                        <input type="text" class="k-textbox" name="email" data-bind="value: email" />
                      </div>
                      <div>
                        <label for="username">Username:</label>
                        <input type="text" class="k-textbox" name="username" data-bind="value: username" />
                      </div>
                      <div>
                        <label for="password">Password:</label>
                        <input type="password" class="k-textbox" name="password" data-bind="value: password" />
                      </div>
                      <div>
                        <label for="accessToken">Access Token:</label>
                        <input type="text" class="k-textbox" name="accessToken" data-bind="value: access_token" />
                      </div>
                      <div>
                        <label for="userId">User Id:</label>
                        <input type="text" class="k-textbox" name="userId" data-bind="value: user_id" placeholder="/1" />
                      </div>
                      <br>
                      <div>
                        <input type="button" class="k-button" data-bind="click: signUp" value="Sign up"/>
                        <input type="button" class="k-button" data-bind="click: getLogin" value="Login"/>
                        <input type="button" class="k-button" data-bind="click: getLogout" value="Logout"/>
                        <input type="button" class="k-button" data-bind="click: getUser" value="Get User"/>
                        <input type="button" class="k-button" data-bind="click: deleteAccessToken" value="Delete Tokens"/>
                        <input type="button" class="k-button" data-bind="click: getDepartment" value="Get Departments"/>
                      </div>
                    </fieldset>
                </div>
            </div>
        </div>
    </div>
</script>

<!-- ***************************
*   K8 Section                 *
**************************** -->
<script id="k8Home" type="text/x-kendo-template">
    <div class="container">         
        <div class="wrapper-background">
            <div id="example" class="new-staff">
                <div class="row">
                    <div class="col-xl-6">
                        <div class="chart-statistic-box">
                            <div class="chart-txt">
                                <div class="chart-txt-top">
                                    <p><span class="unit">$</span><span class="number">1540</span></p>
                                    <p class="caption">Week income</p>
                                </div>
                                <table class="tbl-data">
                                    <tbody><tr>
                                        <td class="price color-purple">120$</td>
                                        <td>Orders</td>
                                    </tr>
                                    <tr>
                                        <td class="price color-yellow">15$</td>
                                        <td>Investments</td>
                                    </tr>
                                    <tr>
                                        <td class="price color-lime">55$</td>
                                        <td>Others</td>
                                    </tr>
                                </tbody></table>
                            </div>
                            <div class="chart-container">
                                <div class="chart-container-in">
                                    <div id="chart_div"><div style="position: relative;"><div dir="ltr" style="position: relative; width: 274px; height: 314px;"><div aria-label="A chart." style="position: absolute; left: 0px; top: 0px; width: 100%; height: 100%;"><svg width="274" height="314" aria-label="A chart." style="overflow: hidden;"><defs id="defs"><clipPath id="_ABSTRACT_RENDERER_ID_0"><rect x="0" y="0" width="274" height="314"></rect></clipPath></defs><rect x="0" y="0" width="274" height="314" stroke="none" stroke-width="0" fill="#008ffb"></rect><g><rect x="0" y="0" width="274" height="314" stroke="none" stroke-width="0" fill-opacity="0" fill="#ffffff"></rect><g clip-path="url(http://themesanytime.com/startui/demo/index.html#_ABSTRACT_RENDERER_ID_0)"><g><rect x="0" y="313" width="274" height="1" stroke="none" stroke-width="0" fill="#1ba0fc"></rect><rect x="0" y="291" width="274" height="1" stroke="none" stroke-width="0" fill="#1ba0fc"></rect><rect x="0" y="268" width="274" height="1" stroke="none" stroke-width="0" fill="#1ba0fc"></rect><rect x="0" y="246" width="274" height="1" stroke="none" stroke-width="0" fill="#1ba0fc"></rect><rect x="0" y="224" width="274" height="1" stroke="none" stroke-width="0" fill="#1ba0fc"></rect><rect x="0" y="201" width="274" height="1" stroke="none" stroke-width="0" fill="#1ba0fc"></rect><rect x="0" y="179" width="274" height="1" stroke="none" stroke-width="0" fill="#1ba0fc"></rect><rect x="0" y="157" width="274" height="1" stroke="none" stroke-width="0" fill="#1ba0fc"></rect><rect x="0" y="134" width="274" height="1" stroke="none" stroke-width="0" fill="#1ba0fc"></rect><rect x="0" y="112" width="274" height="1" stroke="none" stroke-width="0" fill="#1ba0fc"></rect><rect x="0" y="89" width="274" height="1" stroke="none" stroke-width="0" fill="#1ba0fc"></rect><rect x="0" y="67" width="274" height="1" stroke="none" stroke-width="0" fill="#1ba0fc"></rect><rect x="0" y="45" width="274" height="1" stroke="none" stroke-width="0" fill="#1ba0fc"></rect><rect x="0" y="22" width="274" height="1" stroke="none" stroke-width="0" fill="#1ba0fc"></rect><rect x="0" y="0" width="274" height="1" stroke="none" stroke-width="0" fill="#1ba0fc"></rect></g><g><g><path d="M0.5,313.5L0.5,313.5L0.5,197.24285714285713L34.625,197.24285714285713L68.75,152.52857142857144L102.875,157L137,134.64285714285714L171.125,161.4714285714286L205.25,89.92857142857144L239.375,116.75714285714287L273.5,116.75714285714287L273.5,313.5L273.5,313.5Z" stroke="none" stroke-width="0" fill-opacity="0.18" fill="#ffffff"></path></g></g><g><rect x="0" y="313" width="274" height="1" stroke="none" stroke-width="0" fill="#16b4fc"></rect></g><g><path d="M0.5,197.24285714285713L34.625,197.24285714285713L68.75,152.52857142857144L102.875,157L137,134.64285714285714L171.125,161.4714285714286L205.25,89.92857142857144L239.375,116.75714285714287L273.5,116.75714285714287" stroke="#ffffff" stroke-width="2" fill-opacity="1" fill="none"></path></g></g><g><circle cx="0.5" cy="197.24285714285713" r="3.5" stroke="none" stroke-width="0" fill="#ffffff"></circle><circle cx="34.625" cy="197.24285714285713" r="3.5" stroke="none" stroke-width="0" fill="#ffffff"></circle><circle cx="68.75" cy="152.52857142857144" r="3.5" stroke="none" stroke-width="0" fill="#ffffff"></circle><circle cx="102.875" cy="157" r="3.5" stroke="none" stroke-width="0" fill="#ffffff"></circle><circle cx="137" cy="134.64285714285714" r="3.5" stroke="none" stroke-width="0" fill="#ffffff"></circle><circle cx="171.125" cy="161.4714285714286" r="3.5" stroke="none" stroke-width="0" fill="#ffffff"></circle><circle cx="205.25" cy="89.92857142857144" r="3.5" stroke="none" stroke-width="0" fill="#ffffff"></circle><circle cx="239.375" cy="116.75714285714287" r="3.5" stroke="none" stroke-width="0" fill="#ffffff"></circle><circle cx="273.5" cy="116.75714285714287" r="3.5" stroke="none" stroke-width="0" fill="#ffffff"></circle></g></g><g></g></svg><div aria-label="A tabular representation of the data in the chart." style="position: absolute; left: -10000px; top: auto; width: 1px; height: 1px; overflow: hidden;"><table><thead><tr><th>Day</th><th>Values</th></tr></thead><tbody><tr><td>MON</td><td>130</td></tr><tr><td>TUE</td><td>130</td></tr><tr><td>WED</td><td>180</td></tr><tr><td>THU</td><td>175</td></tr><tr><td>FRI</td><td>200</td></tr><tr><td>SAT</td><td>170</td></tr><tr><td>SUN</td><td>250</td></tr><tr><td>MON</td><td>220</td></tr><tr><td>TUE</td><td>220</td></tr></tbody></table></div></div></div><div aria-hidden="true" style="display: none; position: absolute; top: 324px; left: 284px; white-space: nowrap; font-family: &quot;Proxima Nova&quot;; font-size: 11px; font-weight: bold;">...</div><div></div></div></div>
                                    <header class="chart-container-title">Income</header>
                                    <div class="chart-container-x">
                                        <div class="item"></div>
                                        <div class="item">tue</div>
                                        <div class="item">wed</div>
                                        <div class="item">thu</div>
                                        <div class="item">fri</div>
                                        <div class="item">sat</div>
                                        <div class="item">sun</div>
                                        <div class="item">mon</div>
                                        <div class="item"></div>
                                    </div>
                                    <div class="chart-container-y">
                                        <div class="item">300</div>
                                        <div class="item"></div>
                                        <div class="item">250</div>
                                        <div class="item"></div>
                                        <div class="item">200</div>
                                        <div class="item"></div>
                                        <div class="item">150</div>
                                        <div class="item"></div>
                                        <div class="item">100</div>
                                        <div class="item"></div>
                                        <div class="item">50</div>
                                        <div class="item"></div>
                                    </div>
                                </div>
                            </div>
                        </div><!--.chart-statistic-box-->
                    </div><!--.col-->
                    <div class="col-xl-6">
                        <div class="row">
                            <div class="col-sm-6">
                                <article class="statistic-box red">
                                    <div>
                                        <div class="number">26</div>
                                        <div class="caption"><div>Open tickets</div></div>
                                        <div class="percent">
                                            <div class="arrow up"></div>
                                            <p>15%</p>
                                        </div>
                                    </div>
                                </article>
                            </div><!--.col-->
                            <div class="col-sm-6">
                                <article class="statistic-box purple">
                                    <div>
                                        <div class="number">12</div>
                                        <div class="caption"><div>Closes tickets</div></div>
                                        <div class="percent">
                                            <div class="arrow down"></div>
                                            <p>11%</p>
                                        </div>
                                    </div>
                                </article>
                            </div><!--.col-->
                            <div class="col-sm-6">
                                <article class="statistic-box yellow">
                                    <div>
                                        <div class="number">104</div>
                                        <div class="caption"><div>New clients</div></div>
                                        <div class="percent">
                                            <div class="arrow down"></div>
                                            <p>5%</p>
                                        </div>
                                    </div>
                                </article>
                            </div><!--.col-->
                            <div class="col-sm-6">
                                <article class="statistic-box green">
                                    <div>
                                        <div class="number">29</div>
                                        <div class="caption"><div>Here is an example of a long name</div></div>
                                        <div class="percent">
                                            <div class="arrow up"></div>
                                            <p>84%</p>
                                        </div>
                                    </div>
                                </article>
                            </div><!--.col-->
                        </div><!--.row-->
                    </div><!--.col-->
                </div>              
            </div>
        </div>
    </div>
</script>
<script id="k8Center" type="text/x-kendo-template">
    <div class="container">         
        <div class="wrapper-background">
            <div id="example">

                <!-- Search Taps -->
                <section class="tabs-section">
                    <div class="tabs-section-nav tabs-section-nav-icons">
                        <div class="tbl">
                            <ul class="nav" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" href="#tabs-1-tab-1" role="tab" data-toggle="tab">
                                        <span class="nav-link-in">
                                            <span class="glyphicon glyphicon-search"></span>
                                            ស្វែងរក
                                        </span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#tabs-1-tab-2" role="tab" data-toggle="tab">
                                        <span class="nav-link-in">
                                            <span class="font-icon font-icon-build"></span>
                                            អង្គភាព
                                        </span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#tabs-1-tab-3" role="tab" data-toggle="tab">
                                        <span class="nav-link-in">
                                            <i class="fa fa-list"></i>
                                            ផ្សេងៗ
                                        </span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div><!--.tabs-section-nav-->

                    <div class="tab-content">
                        <!-- Default -->
                        <div role="tabpanel" class="tab-pane fade in active" id="tabs-1-tab-1">
                        </div><!-- End Default -->
                        
                        <!-- Departments -->
                        <div role="tabpanel" class="tab-pane fade" id="tabs-1-tab-2">
                            <table class="table table-striped">
                                <tr>
                                    <td style="vertical-align: top;">អង្គភាពថ្នាក់ស្មើអគ្គ/ក្រសួង</td>
                                    <td>
                                        <input id="ddlGeneral" name="ddlGeneral"
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-filter="startswith"
                                               data-text-field="general_commissariat_name"
                                               data-value-field="id"
                                               data-bind="value: filters.general_commissariat_id, 
                                                          source: generalCommissariatDS,
                                                          events:{change: generalChanges}"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width: 100%;" />
                                        
                                        <br>

                                        <input id="ddlDepartmentType" name="ddlDepartmentType"
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-auto-bind="false"
                                               data-filter="startswith"
                                               data-text-field="department_type"
                                               data-value-field="id"
                                               data-bind="value: filters.department_type_id,
                                                          source: departmentTypeDS,
                                                          events:{change: departmentTypeChanges}"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width: 100%;" />                            
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;">នាយកដ្ឋាន/ស្នងការដ្ឋាន</td>
                                    <td>
                                        <input id="ddlDepartment" name="ddlDepartment"
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-auto-bind="false"
                                               data-filter="startswith"
                                               data-text-field="department_name"
                                               data-value-field="id"
                                               data-bind="value: filters.department_id,
                                                          source: departmentDS,
                                                          events:{change: departmentChanges}"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width: 100%;" />                            
                                    
                                    <br>

                                        <input id="ddlOfficeType" name="ddlOfficeType"
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-auto-bind="false"
                                               data-filter="startswith"
                                               data-text-field="office_type"
                                               data-value-field="id"
                                               data-bind="value: filters.office_type_id,
                                                          source: officeTypeDS,
                                                          events:{change: officeTypeChanges}"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width: 100%;" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;">ការិយាល័យ/អធិការដ្ឋាន</td>
                                    <td>
                                        <input id="ddlOffice" name="ddlOffice"
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-auto-bind="false"
                                               data-filter="startswith"
                                               data-text-field="office_name"
                                               data-value-field="id"
                                               data-bind="value: filters.office_id,
                                                          source: officeDS,
                                                          events:{change: officeChanges}"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width: 100%;" />
                                    
                                    <br>

                                        <input id="ddlSectorType" name="ddlSectorType"
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-auto-bind="false"
                                               data-filter="startswith"
                                               data-text-field="sector_type"
                                               data-value-field="id"
                                               data-bind="value: filters.sector_type_id,
                                                          source: sectorTypeDS,
                                                          events:{change: sectorTypeChanges}"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width: 100%;" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>ផ្នែក/ប៉ុស្តិ៍</td>
                                    <td>
                                        <input id="ddlSector" name="ddlSector"
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-auto-bind="false"
                                               data-filter="startswith"
                                               data-text-field="sector_name"
                                               data-value-field="id"
                                               data-bind="value: filters.sector_id,
                                                          source: sectorDS"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width: 100%;" />
                                    </td>
                                </tr>                                
                                <tr>
                                    <td style="vertical-align: top;">មុខតំណែង</td>
                                    <td style="vertical-align: top;">
                                        <input id="ddlPosition" name="ddlPosition"                                             
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-filter="startswith"
                                               data-text-field="position_name"
                                               data-value-field="id"
                                               data-template="position-list-tmpl"
                                               data-bind="value: filters.position_id,
                                                          source: positionDS"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width:100%;" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>តួនាទីបន្ថែម</td>
                                    <td>
                                        <input id="ddlOtherPosition" name="ddlOtherPosition"
                                               data-role="dropdownlist"                                           
                                               data-value-primitive="true"
                                               data-filter="startswith"
                                               data-text-field="position_name"
                                               data-value-field="id"
                                               data-bind="value: filters.other_position_id,
                                                          source: otherPositionDS"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width:100%" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>ឋានន្តរសក្តិ</td>
                                    <td>
                                        <input id="ddlRank" name="ddlRank"
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-filter="startswith"
                                               data-text-field="rank_name"
                                               data-value-field="id"
                                               data-bind="value: filters.rank_id, 
                                                          source: rankDS"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                           style="width:100%" />
                                </td>
                            </tr>
                        </table>
                        </div><!-- End Departments -->
                        
                        <!-- Others -->
                        <div role="tabpanel" class="tab-pane fade" id="tabs-1-tab-3">
                            <table class="table table-striped">
                                <tr>
                                    <td>ថ្ងៃកំណើត</td>
                                    <td colspan="3">
                                        <input data-role="datepicker"
                                               data-format="dd-MM-yyyy"
                                               data-bind="value: filters.start_dob,
                                                          max: end_dob"
                                               placeholder="ចាប់ពី..." >

                                        <input data-role="datepicker"
                                               data-format="dd-MM-yyyy"
                                               data-bind="value: filters.end_dob,
                                                          min: start_dob"
                                               placeholder="ដល់..." >
                                    </td>
                                </tr>
                                <tr>
                                    <td>ថ្ងៃចូលបំរើការងារ</td>
                                    <td colspan="3">
                                        <input data-role="datepicker"
                                               data-format="dd-MM-yyyy"
                                               data-bind="value: filters.start_entry,
                                                          max: end_entry"
                                               placeholder="ចាប់ពី..." >

                                        <input data-role="datepicker"
                                               data-format="dd-MM-yyyy"
                                               data-bind="value: filters.end_entry,
                                                          min: start_entry"
                                               placeholder="ដល់..." >

                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.entried_announce_type,
                                                          source: announceTypeList"
                                               data-option-label="គ្រប់​ ប្រកាស..." />

                                        <input type="text" class="k-textbox" data-bind="value: filters.entried_number" placeholder="លេខប្រកាស..." />
                                    </td>
                                </tr>                                
                                <tr>
                                    <td>ថ្ងៃចូលនិវត្តន៍</td>
                                    <td colspan="3">
                                        <input data-role="datepicker"
                                               data-format="dd-MM-yyyy"
                                               data-bind="value: filters.start_retired,
                                                          max: end_retired"
                                               placeholder="ចាប់ពី..." >

                                        <input data-role="datepicker"
                                               data-format="dd-MM-yyyy"
                                               data-bind="value: filters.end_retired,
                                                          min: start_retired"
                                               placeholder="ដល់..." >

                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.retired_announce_type,
                                                          source: announceTypeList"
                                               data-option-label="គ្រប់​ ប្រកាស..." />

                                        <input type="text" class="k-textbox" data-bind="value: filters.retired_number" placeholder="លេខប្រកាស..." />
                                    </td>
                                </tr>
                                <tr>
                                    <td>ស្ថានភាពការងារ</td>
                                    <td colspan="3">
                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.staff_status,
                                                          source: statusList"
                                               data-option-label="គ្រប់​ ស្ថានភាព..." />
                                    </td>
                                </tr>
                                <tr>
                                    <td>សៀវភៅពិសា្ដរ</td>
                                    <td>
                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.background_book,
                                                          source: hasOrNoList"
                                               data-option-label="ទាំងអស់..." />
                                    </td>
                                    <td>ជីវប្រវត្តិសង្ខេប</td>
                                    <td>
                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.background,
                                                          source: hasOrNoList"
                                               data-option-label="ទាំងអស់..." />
                                    </td>
                                </tr>
                                <tr>                                    
                                    <td>ប្រាក់បៀវត្សរ៍</td>
                                    <td>
                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.payroll,
                                                          source: hasOrNoList"
                                               data-option-label="ទាំងអស់..." />
                                    </td>
                                    <td>អនុវត្តន៍វិន័យ</td>
                                    <td>
                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.punistment,
                                                          source: hasOrNoList"
                                               data-option-label="ទាំងអស់..." />
                                    </td>
                                </tr>
                                <tr>
                                    <td>ភេទ</td>
                                    <td>
                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.gender,
                                                          source: genderList"
                                               data-option-label="ទាំងអស់..." />
                                    </td>
                                    <td>ឯកសារយកចេញ</td>
                                    <td>
                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.document_movement,
                                                          source: movementList"
                                               data-option-label="ទាំងអស់..." />
                                    </td>
                                </tr>
                            </table>
                        </div><!-- End Others -->
                    </div><!--.tab-content-->

                    <!-- Search Box -->                 
                    <section class="proj-page-add-txt">
                        <input type="text" class="form-control" 
                                data-bind="value: filters.searchText" 
                                placeholder="អត្តលេខ / ឈ្មោះជាអក្សរខ្មែរ / ឈ្មោះជាអក្សរឡាតាំង ...">
                        <button type="button" class="btn" data-bind="click: search">
                            <i class="font-icon font-icon-search"></i>
                        </button>                                               
                    </section>              

                    <!-- Summary -->
                    <div class="widget-tabs-nav colored">
                        <ul class="tbl-row" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link blue">
                                    <i class="font-icon font-icon-users-two"></i>
                                    <span data-format="n0" data-bind="text: dataSource.total()" style="font-size: 25px;margin-top: -9px; display: inline-block;"></span>
                                    <span style="font-size: 20px;margin-top: -9px; display: inline-block;">នាក់</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link orange">
                                    <i class="font-icon font-icon-award"></i>
                                    <span style="font-size: 25px;margin-top: -9px; display: inline-block;">5 386</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link green">
                                    <i class="font-icon font-icon-eye"></i>
                                    <span style="font-size: 25px;margin-top: -9px; display: inline-block;">24 953</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </section>

                <!-- Table List -->
                <div class="table-responsive">
                    <div data-role="grid"
                        data-column-menu="true"
                        data-reorderable="true"
                        data-scrollable="false"
                        data-resizable="true"
                        data-auto-bind="false"
                        data-columns="[
                                        { field: 'staff_number', title: 'អត្តលេខ', width: '120px' },
                                        { field: 'name_kh', title: 'ឈ្មោះ', template:'#=surname_kh# #=name_kh#', width: '120px' },
                                        { field: 'ranks.rank_name', title: 'ឋានន្តរសក្តិ', width: '120px' },
                                        { field: 'positions.position_name', title: 'មុខតំណែង', width: '120px' },
                                        { field: 'sectors.sector_name', title: 'ផ្នែក/ប៉ុស្តិ៍', width: '120px' },
                                        { field: 'offices.office_name', title: 'អង្គ.ស្មើការិ.', width: '120px' },
                                        { field: 'departments.department_name', title: 'អង្គ.ស្មើនា.ដ្ឋាន', width: '120px' },
                                        { field: 'general_commissariats.general_commissariat_name', title: 'អង្គ.ស្មើអគ្គ', width: '120px' }
                                    ]"
                        data-bind="source: dataSource"></div>
                </div>
                <div class="k-pager-wrap" 
                        data-role="pager"
                        data-auto-bind="false" 
                        data-bind="source: dataSource"></div>

            </div>
        </div>
    </div>
</script>
<script id="k8Center-template" type="text/x-kendo-tmpl">
    <tr>
        <td style="text-align: center; ">
            <div class="dropdown dropdown-status">
                <button class="btn btn-primary dropdown-toggle" 
                    type="button" data-toggle="dropdown" 
                    aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-list-ul"></i>
                </button>
                <div class="dropdown-menu">
                    <a class="dropdown-item">ពត៌មានពិស្ដារ</a>
                    <a class="dropdown-item">ជីវប្រវត្តិនានា</a>
                    <div class="dropdown-divider"></div>
                    <a href="\#/staff/#=id#" class="dropdown-item">កែសំរួល</a>
                </div>
            </div>                      
        </td>       
        <td>#=staff_number#</td>
        <td>
            <span data-role="tooltip"
                  data-content="<img src='assets/img/smile.png' width='100px' height='100' />"
                  data-position="bottom">#=surname_kh# #=name_kh#</span>
        </td>
        <td>#=ranks.rank_name#</td>
        <td>#=positions.position_name#</td>
        <td>
            #=sectors.sector_name#​ <br>
            #=offices.office_name#​ <br>
            #=departments.department_name# <br>
            #=general_commissariats.general_commissariat_name#​
        </td>       
    </tr>   
</script>

<script id="staff" type="text/x-kendo-template">
    <div class="container">         
        <div class="wrapper-background">
            <div id="example">

                <span class="font-icon font-icon-del pull-right" 
                        onclick="javascript:window.history.back()"
                        data-bind="click: cancel"></span>   
                
                <h2 data-bind="text: title"></h2>

                <section class="card">
                    <div class="card-block">

                        <h5 class="with-border m-t-0">I. ស្ថានភាពសាមីខ្លួន</h5>

                        <div class="row">
                            <div class="col-lg-3">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtNumber">អត្តលេខ</label>
                                    <input type="text" class="form-control" id="txtNumber" name="txtNumber" 
                                            data-bind="value: obj.staff_number,
                                                        events:{change:checkExistingNumber}" 
                                            placeholder="អត្តលេខ...">
                                </fieldset>
                            </div>
                            <div class="col-lg-3">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtDocumentNumber">លេខតំកល់ឯកសារ</label>
                                    <input type="text" class="form-control" id="txtDocumentNumber" name="txtDocumentNumber" 
                                            data-bind="value: obj.document_number" 
                                            placeholder="លេខតំកល់ឯកសារ...">
                                </fieldset>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-3">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtSurnameKh">គោត្តនាម</label>
                                    <input type="text" class="form-control" id="txtSurnameKh" name="txtSurnameKh" 
                                            data-bind="value: obj.surname_kh" 
                                            required data-required-msg="required" placeholder="ត្រកូល...">
                                </fieldset>
                            </div>
                            <div class="col-lg-3">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtNameKh">នាម</label>
                                    <input type="text" class="form-control" id="txtNameKh" name="txtNameKh" 
                                            data-bind="value: obj.name_kh" 
                                            required data-required-msg="required" placeholder="ឈ្មោះ...">
                                </fieldset>
                            </div>
                        </div>

                        <div class="row">                   
                            <div class="col-lg-3">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtSurnameEn">Surname</label>
                                    <input type="text" class="form-control" id="txtSurnameEn" name="txtSurnameEn" 
                                            data-bind="value: obj.surname_en"
                                            placeholder="ត្រកូលជាអក្សរឡាតាំង...">
                                </fieldset>
                            </div>
                            <div class="col-lg-3">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtNameEn">Name</label>
                                    <input type="text" class="form-control" id="txtNameEn" name="txtNameEn"
                                            data-bind="value: obj.name_en"
                                            placeholder="ឈ្មោះជាអក្សរឡាតាំង...">
                                </fieldset>
                            </div>              
                        </div>

                        <br>

                        <table class="table table-striped">
                            <tr>
                                <td style="vertical-align: top;">អង្គភាពថ្នាក់ស្មើអគ្គ/ក្រសួង</td>
                                <td>
                                    <input id="ddlGeneral" name="ddlGeneral"
                                           data-role="dropdownlist"
                                           data-value-primitive="true"
                                           data-filter="startswith"
                                           data-text-field="general_commissariat_name"
                                           data-value-field="id"
                                           data-bind="value: obj.general_commissariat_id, 
                                                      source: generalCommissariatDS,
                                                      events:{change: generalChanges}"
                                           data-option-label="--- សូមជ្រើសរើស ---"
                                           style="width: 100%;" />
                                    
                                    <br>

                                    <input id="ddlDepartmentType" name="ddlDepartmentType"
                                           data-role="dropdownlist"
                                           data-value-primitive="true"
                                           data-auto-bind="false"
                                           data-filter="startswith"
                                           data-text-field="department_type"
                                           data-value-field="id"
                                           data-bind="value: obj.department_type_id,
                                                      source: departmentTypeDS,
                                                      events:{change: departmentTypeChanges}"
                                           data-option-label="--- សូមជ្រើសរើស ---"
                                           style="width: 100%;" />                            
                                </td>
                            </tr>
                            <tr>
                                <td style="vertical-align: top;">នាយកដ្ឋាន/ស្នងការដ្ឋាន</td>
                                <td>
                                    <input id="ddlDepartment" name="ddlDepartment"
                                           data-role="dropdownlist"
                                           data-value-primitive="true"
                                           data-auto-bind="false"
                                           data-filter="startswith"
                                           data-text-field="department_name"
                                           data-value-field="id"
                                           data-bind="value: obj.department_id,
                                                      source: departmentDS,
                                                      events:{change: departmentChanges}"
                                           data-option-label="--- សូមជ្រើសរើស ---"
                                           style="width: 100%;" />                            
                                
                                <br>

                                    <input id="ddlOfficeType" name="ddlOfficeType"
                                           data-role="dropdownlist"
                                           data-value-primitive="true"
                                           data-auto-bind="false"
                                           data-filter="startswith"
                                           data-text-field="office_type"
                                           data-value-field="id"
                                           data-bind="value: obj.office_type_id,
                                                      source: officeTypeDS,
                                                      events:{change: officeTypeChanges}"
                                           data-option-label="--- សូមជ្រើសរើស ---"
                                           style="width: 100%;" />
                                </td>
                            </tr>
                            <tr>
                                <td style="vertical-align: top;">ការិយាល័យ/អធិការដ្ឋាន</td>
                                <td>
                                    <input id="ddlOffice" name="ddlOffice"
                                           data-role="dropdownlist"
                                           data-value-primitive="true"
                                           data-auto-bind="false"
                                           data-filter="startswith"
                                           data-text-field="office_name"
                                           data-value-field="id"
                                           data-bind="value: obj.office_id,
                                                      source: officeDS,
                                                      events:{change: officeChanges}"
                                           data-option-label="--- សូមជ្រើសរើស ---"
                                           style="width: 100%;" />
                                
                                <br>

                                    <input id="ddlSectorType" name="ddlSectorType"
                                           data-role="dropdownlist"
                                           data-value-primitive="true"
                                           data-auto-bind="false"
                                           data-filter="startswith"
                                           data-text-field="sector_type"
                                           data-value-field="id"
                                           data-bind="value: obj.sector_type_id,
                                                      source: sectorTypeDS,
                                                      events:{change: sectorTypeChanges}"
                                           data-option-label="--- សូមជ្រើសរើស ---"
                                           style="width: 100%;" />
                                </td>
                            </tr>
                            <tr>
                                <td>ផ្នែក/ប៉ុស្តិ៍</td>
                                <td>
                                    <input id="ddlSector" name="ddlSector"
                                           data-role="dropdownlist"
                                           data-value-primitive="true"
                                           data-auto-bind="false"
                                           data-filter="startswith"
                                           data-text-field="sector_name"
                                           data-value-field="id"
                                           data-bind="value: obj.sector_id,
                                                      source: sectorDS"
                                           data-option-label="--- សូមជ្រើសរើស ---"
                                           style="width: 100%;" />
                                </td>
                            </tr>                                
                            <tr>
                                <td style="vertical-align: top;">មុខតំណែង</td>
                                <td style="vertical-align: top;">
                                    <input id="ddlPosition" name="ddlPosition"                                             
                                           data-role="dropdownlist"
                                           data-value-primitive="true"
                                           data-filter="startswith"
                                           data-text-field="position_name"
                                           data-value-field="id"
                                           data-template="position-list-tmpl"
                                           data-bind="value: obj.position_id,
                                                      source: positionDS"
                                           data-option-label="--- សូមជ្រើសរើស ---"
                                           style="width:100%;" />
                                </td>
                            </tr>
                            <tr>
                                <td>តួនាទីបន្ថែម</td>
                                <td>
                                    <input id="ddlOtherPosition" name="ddlOtherPosition"
                                           data-role="dropdownlist"                                           
                                           data-value-primitive="true"
                                           data-filter="startswith"
                                           data-text-field="position_name"
                                           data-value-field="id"
                                           data-bind="value: obj.other_position_id,
                                                      source: otherPositionDS"
                                           data-option-label="--- សូមជ្រើសរើស ---"
                                           style="width:100%" />
                                </td>
                            </tr>
                            <tr>
                                <td>ឋានន្តរសក្តិ</td>
                                <td>
                                    <input id="ddlRank" name="ddlRank"
                                           data-role="dropdownlist"
                                           data-value-primitive="true"
                                           data-filter="startswith"
                                           data-text-field="rank_name"
                                           data-value-field="id"
                                           data-bind="value: obj.rank_id, 
                                                      source: rankDS"
                                           data-option-label="--- សូមជ្រើសរើស ---"
                                           style="width:100%" />
                                </td>
                            </tr>
                        </table>

                        <br>

                        <div class="row">
                            <div class="col-lg-3">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="ddlStatus">ស្ថានភាពការងារ</label>
                                    <input id="ddlStatus" name="ddlStatus"
                                           class="form-control"
                                           data-role="dropdownlist"
                                           data-value-primitive="true"
                                           data-text-field="status_name"
                                           data-value-field="id"
                                           data-bind="value: obj.status_id, 
                                                      source: statusDS"
                                           style="width: 100%;" />
                                </fieldset>
                            </div>

                            <div class="col-lg-3">
                                <!-- <fieldset class="form-group">
                                    <label class="form-label semibold" for="dpkDateEntry">ថ្ងៃចូលបំរើការងារ</label>                                   
                                    <input id="dpkDateEntry" name="dpkDateEntry" 
                                            class="form-control"
                                            data-role="datepicker"
                                            data-bind="value: obj.date_entried" 
                                            data-format="dd-MM-yyyy"
                                            data-parse-formats="yyyy-MM-dd" 
                                            placeholder="dd-MM-yyyy" style="width: 100%;" />
                                </fieldset> -->
                            </div>

                            <div class="col-lg-3">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="ddlHistoryBook">សៀវភៅពិស្ដារ</label>
                                    <input id="ddlHistoryBook" name="ddlHistoryBook"
                                           class="form-control"
                                           data-role="dropdownlist"
                                           data-value-primitive="true"
                                           data-text-field="text"
                                           data-value-field="value"
                                           data-bind="value: obj.has_history_book, 
                                                      source: hasOrNoList"
                                           style="width: 100%;" />
                                </fieldset>
                            </div>

                            <div class="col-lg-3">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtReligion">សាសនា</label>
                                    <input type="text" class="form-control" id="txtReligion" name="txtReligion" 
                                            data-bind="value: obj.religion" 
                                            placeholder="សាសនា...">
                                </fieldset>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-3">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtPhone">លេខទូរសព្ទ</label>
                                    <input type="text" class="form-control" id="txtPhone" name="txtPhone" 
                                            data-bind="value: obj.phone" 
                                            placeholder="eg. 099 999 999 ...">
                                </fieldset>
                            </div>

                            <div class="col-lg-3">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtEmail">អ៊ីមែល</label>
                                    <input type="text" class="form-control" id="txtEmail" name="txtEmail" 
                                            data-bind="value: obj.email" 
                                            placeholder="eg. name@email.com ...">
                                </fieldset>
                            </div>

                            <div class="col-lg-3">
                                <!-- <fieldset class="form-group">
                                    <label class="form-label semibold" for="dpkDateOfBirth">ថ្ងៃកំណើតៈ</label>
                                    <input id="dpkDateOfBirth" name="dpkDateOfBirth"
                                            class="form-control" 
                                            data-role="datepicker"
                                            data-bind="value: obj.date_of_birth" 
                                            data-format="dd-MM-yyyy"
                                            data-parse-formats="yyyy-MM-dd" 
                                            placeholder="dd-MM-yyyy" style="width: 100%;" />
                                </fieldset> -->
                            </div>
                            
                            <div class="col-lg-3">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtNationality">សញ្ជាតិ</label>
                                    <input type="text" class="form-control" id="txtNationality" name="txtNationality" 
                                            data-bind="value: obj.nationality" 
                                            placeholder="សញ្ជាតិ...">
                                </fieldset>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-6">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtAddress">អាស័យដ្ឋានបច្ចុប្បន្ន</label>                                   
                                    <textarea id="txtAddress" name="txtAddress" 
                                            class="form-control"
                                            class="k-textbox"
                                            cols="0" rows="2"
                                            data-bind="value: obj.address" 
                                            placeholder="អាស័យដ្ឋានបច្ចុប្បន្ន..." style="width:100%"></textarea>
                                </fieldset>
                            </div>
                            <div class="col-lg-6">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtPlaceOfBirth">ទីកន្លែងកំណើត</label>
                                    <textarea id="txtPlaceOfBirth" name="txtPlaceOfBirth" 
                                            class="form-control"
                                            class="k-textbox"
                                            cols="0" rows="2"
                                            data-bind="value: obj.place_of_birth" 
                                            placeholder="ទីកន្លែងកំណើត..." style="width:100%"></textarea>
                                </fieldset>
                            </div>                            
                        </div>

                        <div class="row">
                            <div class="col-lg-3">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtBodyShape">ភិនភាគ</label>
                                    <input type="text" class="form-control" id="txtBodyShape" name="txtBodyShape" 
                                            data-bind="value: obj.body_shape" 
                                            placeholder="ភិនភាគ...">
                                </fieldset>
                            </div>

                            <div class="col-lg-3">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtSkinColor">សម្បុរ</label>
                                    <input type="text" class="form-control" id="txtSkinColor" name="txtSkinColor" 
                                            data-bind="value: obj.skin_color" 
                                            placeholder="សម្បុរ...">
                                </fieldset>
                            </div>

                            <div class="col-lg-3">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtHeight">កំពស់</label>
                                    <input type="text" class="form-control" id="txtHeight" name="txtHeight" 
                                            data-bind="value: obj.height" 
                                            placeholder="កំពស់...">
                                </fieldset>
                            </div>
                            
                            <div class="col-lg-3">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtWeight">ទំងន់</label>
                                    <input type="text" class="form-control" id="txtWeight" name="txtWeight" 
                                            data-bind="value: obj.weight" 
                                            placeholder="ទំងន់...">
                                </fieldset>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-6">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtQualification">កំរិតវប្បធម៍ទូទៅ</label>                                   
                                    <textarea id="txtQualification" name="txtQualification" 
                                            class="form-control"
                                            class="k-textbox"
                                            cols="0" rows="2"
                                            data-bind="value: obj.qualification" 
                                            placeholder="កំរិតវប្បធម៍ទូទៅ..." style="width:100%"></textarea>
                                </fieldset>
                            </div>
                            <div class="col-lg-6">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtOtherSkill">កំរិតបណ្ដុះបណ្ដាលវិជ្ជាជីវ</label>
                                    <textarea id="txtOtherSkill" name="txtOtherSkill" 
                                            class="form-control"
                                            class="k-textbox"
                                            cols="0" rows="2"
                                            data-bind="value: obj.other_skill" 
                                            placeholder="កំរិតបណ្ដុះបណ្ដាលវិជ្ជាជីវ..." style="width:100%"></textarea>
                                </fieldset>
                            </div>                            
                        </div>

                        <div class="row">
                            <div class="col-lg-12">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtLanguage">កំរិតចំណេះដឹងភាសាបរទេស</label>                                   
                                    <textarea id="txtLanguage" name="txtLanguage" 
                                            class="form-control"
                                            class="k-textbox"
                                            cols="0" rows="2"
                                            data-bind="value: obj.language" 
                                            placeholder="កំរិតចំណេះដឹងភាសាបរទេស..." style="width:100%"></textarea>
                                </fieldset>
                            </div>
                        </div>

                    </div>
                </section>

                <br>

                <section class="card">
                    <div class="card-block">

                        <h5 class="with-border m-t-0">II. ស្ថានភាពគ្រួសារ</h5>

                        <div class="row">
                            <div class="col-lg-6">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="ddlMaritalStatus">ស្ថានភាពគ្រួសារ</label>
                                    <input id="ddlMaritalStatus" name="ddlMaritalStatus"
                                           class="form-control"
                                           data-role="dropdownlist"
                                           data-value-primitive="true"
                                           data-text-field="text"
                                           data-value-field="value"
                                           data-bind="value: obj.marital_status, 
                                                      source: maritalStatusList"
                                           style="width: 100%;" />
                                </fieldset>
                            </div>
                            <div class="col-lg-6">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtChildrenAmount">ចំនួនកូន</label>
                                    <input type="number" 
                                           class="form-control"
                                           min="0" max="10"
                                           data-bind="value: obj.children_amount"
                                           placeholder="ចំនួនកូន..." 
                                           style="width: 100%">
                                </fieldset>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-5">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtSpouseName">ឈ្មោះប្ដី ឬ ប្រពន្ធ</label>                                   
                                    <input type="text" class="form-control" id="txtSpouseName" name="txtSpouseName" 
                                            data-bind="value: obj.spouse_name"
                                            placeholder="ឈ្មោះប្ដី ឬ ប្រពន្ធ...">
                                </fieldset>
                            </div>
                            <div class="col-lg-2">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtSpouseBirthday">ថ្ងៃកំណើត</label>
                                    <input type="text" class="form-control" id="txtSpouseBirthday" name="txtSpouseBirthday" 
                                            data-bind="value: obj.spouse_birthday" 
                                            placeholder="ថ្ងៃកំណើត...">
                                </fieldset>
                            </div>
                            <div class="col-lg-5">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtSpouseJob">មុខរបរ</label>
                                    <input type="text" class="form-control" id="txtSpouseJob" name="txtSpouseJob" 
                                            data-bind="value: obj.spouse_job" 
                                            placeholder="មុខរបរ...">
                                </fieldset>
                            </div>
                        </div>

                        <div class="row"> 
                            <div class="col-lg-12">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtSpouseAddress">អាស័យដ្ឋាន</label>                                   
                                    <textarea id="txtSpouseAddress" name="txtSpouseAddress" 
                                            class="form-control"
                                            class="k-textbox"
                                            cols="0" rows="2"
                                            data-bind="value: obj.spouse_address" 
                                            placeholder="អាស័យដ្ឋាន..." style="width:100%"></textarea>
                                </fieldset>
                            </div>                           
                        </div>

                        <br>

                        <div class="row">
                            <div class="col-lg-5">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtFatherName">ឈ្មោះឪពុក</label>                                   
                                    <input type="text" class="form-control" id="txtFatherName" name="txtFatherName" 
                                            data-bind="value: obj.father_name"
                                            placeholder="ឈ្មោះឪពុក...">
                                </fieldset>
                            </div>
                            <div class="col-lg-2">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtFatherBirthday">ថ្ងៃកំណើត</label>
                                    <input type="text" class="form-control" id="txtFatherBirthday" name="txtFatherBirthday" 
                                            data-bind="value: obj.father_birthday" 
                                            placeholder="ថ្ងៃកំណើត...">
                                </fieldset>
                            </div>
                            <div class="col-lg-5">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtFatherJob">មុខរបរ</label>
                                    <input type="text" class="form-control" id="txtFatherJob" name="txtFatherJob" 
                                            data-bind="value: obj.father_job" 
                                            placeholder="មុខរបរ...">
                                </fieldset>
                            </div>
                        </div>

                        <div class="row"> 
                            <div class="col-lg-12">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtFatherAddress">អាស័យដ្ឋាន</label>                                   
                                    <textarea id="txtFatherAddress" name="txtFatherAddress" 
                                            class="form-control"
                                            class="k-textbox"
                                            cols="0" rows="2"
                                            data-bind="value: obj.father_address" 
                                            placeholder="អាស័យដ្ឋាន..." style="width:100%"></textarea>
                                </fieldset>
                            </div>                           
                        </div>

                        <br>

                        <div class="row">
                            <div class="col-lg-5">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtMotherName">ឈ្មោះម្ដាយ</label>                                   
                                    <input type="text" class="form-control" id="txtMotherName" name="txtMotherName" 
                                            data-bind="value: obj.mother_name"
                                            placeholder="ឈ្មោះម្ដាយ...">
                                </fieldset>
                            </div>
                            <div class="col-lg-2">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtMotherBirthday">ថ្ងៃកំណើត</label>
                                    <input type="text" class="form-control" id="txtMotherBirthday" name="txtMotherBirthday" 
                                            data-bind="value: obj.mother_birthday" 
                                            placeholder="ថ្ងៃកំណើត...">
                                </fieldset>
                            </div>
                            <div class="col-lg-5">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtMotherJob">មុខរបរ</label>
                                    <input type="text" class="form-control" id="txtMotherJob" name="txtMotherJob" 
                                            data-bind="value: obj.mother_job" 
                                            placeholder="មុខរបរ...">
                                </fieldset>
                            </div>
                        </div>

                        <div class="row"> 
                            <div class="col-lg-12">
                                <fieldset class="form-group">
                                    <label class="form-label semibold" for="txtMotherAddress">អាស័យដ្ឋាន</label>                                   
                                    <textarea id="txtMotherAddress" name="txtMotherAddress" 
                                            class="form-control"
                                            class="k-textbox"
                                            cols="0" rows="2"
                                            data-bind="value: obj.mother_address" 
                                            placeholder="អាស័យដ្ឋាន..." style="width:100%"></textarea>
                                </fieldset>
                            </div>                           
                        </div>

                    </div>
                </section>

                <br>

                <!-- Form actions -->
                <div class="box-typical box-typical-padding" align="right">
                    <div id="ntf1" data-role="notification"></div>

                    <!-- Delete Confirmation -->
                    <div data-role="window"
                         data-title="Delete Confirmation"
                         data-width="350"
                         data-height="200"
                         data-iframe="true"
                         data-modal="true"
                         data-visible="false"
                         data-position="{top:'40%',left:'35%'}"
                         data-actions="{}"
                         data-resizable="false"
                         data-bind="visible: showConfirm"
                         style="text-align:center;">
                        <p style="font-size:25px; margin: 15px 0 25px;" class="delete-message" data-bind="text: confirmMessage"></p>
                        <button style="font-size:14px; border:none; background:#496cad; color:#fff; padding:5px 25px;" data-bind="click:delete">Yes</button> 
                        <button style="font-size:14px; border:none; background:red; color:#fff; padding:5px 25px;" data-bind="click:closeConfirm">No</button>
                    </div>
                    <!-- // Delete Confirmation -->

                    <button id="saveNew" type="button" class="btn btn-inline btn-primary-outline">
                        <i class="fa fa-save"></i>&nbsp;
                        រក្សាទុក
                    </button>                   
                    <button id="saveClose" type="button" class="btn btn-inline btn-success-outline">
                        <i class="fa fa-power-off"></i>&nbsp;
                        បិទ
                    </button>
                    <button type="button" class="btn btn-inline btn-secondary-outline">
                        <i class="fa fa-print"></i>&nbsp;
                        បោះពុម្ព
                    </button>                   
                    <button type="button" class="btn btn-inline btn-warning-outline" 
                        onclick="javascript:window.history.back()" data-bind="click: cancel">
                        <i class="fa fa-remove"></i>&nbsp;
                        មោឃះ
                    </button>
                    <button type="button" class="btn btn-inline btn-danger-outline"
                        data-bind="click: openConfirm, visible: isEdit">
                        <i class="fa fa-trash-o"></i>&nbsp;
                        លុប
                    </button>                                               
                </div>
                <!-- // Form actions END -->

            </div>
        </div>
    </div>
</script>
<script id="departmentRecord" type="text/x-kendo-template">
    <div class="container">         
        <div class="wrapper-background">
            <div id="example" class="new-staff">

                <span class="font-icon font-icon-del pull-right" 
                        onclick="javascript:window.history.back()"
                        data-bind="click: cancel"></span>   
                
                <h2>ផ្ទេរភារកិច្ច តែងតាំងមុខតំណែង​ និង​ ឋានន្តរសក្តិ</h2>
                
                <table class="table table-striped">
                    <tr>
                        <td style="vertical-align: top;">អង្គភាពថ្នាក់ស្មើអគ្គ/ក្រសួង</td>
                        <td>
                            <input id="ddlGeneral" name="ddlGeneral"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-filter="startswith"
                                   data-text-field="general_commissariat_name"
                                   data-value-field="id"
                                   data-bind="value: obj.general_commissariat_id, 
                                              source: generalCommissariatDS,
                                              events:{change: generalChanges}"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width: 100%;" />
                            
                            <br>

                            <input id="ddlDepartmentType" name="ddlDepartmentType"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-auto-bind="false"
                                   data-filter="startswith"
                                   data-text-field="department_type"
                                   data-value-field="id"
                                   data-bind="value: obj.department_type_id,
                                              source: departmentTypeDS,
                                              events:{change: departmentTypeChanges}"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width: 100%;" />
                        </td>
                        <td>
                            <input id="ddlNewGeneral" name="ddlNewGeneral"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-filter="startswith"
                                   data-text-field="general_commissariat_name"
                                   data-value-field="id"
                                   data-bind="value: obj.new_general_commissariat_id, 
                                              source: newGeneralCommissariatDS,
                                              events:{change: newGeneralChanges}"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width: 100%;" />
                            
                            <br>

                            <input id="ddlNewDepartmentType" name="ddlNewDepartmentType"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-auto-bind="false"
                                   data-filter="startswith"
                                   data-text-field="department_type"
                                   data-value-field="id"
                                   data-bind="value: obj.new_department_type_id,
                                              source: newDepartmentTypeDS,
                                              events:{change: newDepartmentTypeChanges}"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width: 100%;" />
                        </td>
                    </tr>
                    <tr>
                        <td style="vertical-align: top;">នាយកដ្ឋាន/ស្នងការដ្ឋាន</td>
                        <td>
                            <input id="ddlDepartment" name="ddlDepartment"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-auto-bind="false"
                                   data-filter="startswith"
                                   data-text-field="department_name"
                                   data-value-field="id"
                                   data-bind="value: obj.department_id,
                                              source: departmentDS,
                                              events:{change: departmentChanges}"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width: 100%;" />
                        <br>
                            <input id="ddlOfficeType" name="ddlOfficeType"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-auto-bind="false"
                                   data-filter="startswith"
                                   data-text-field="office_type"
                                   data-value-field="id"
                                   data-bind="value: obj.office_type_id,
                                              source: officeTypeDS,
                                              events:{change: officeTypeChanges}"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width: 100%;" />
                        </td>
                        <td>
                            <input id="ddlNewDepartment" name="ddlNewDepartment"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-auto-bind="false"
                                   data-filter="startswith"
                                   data-text-field="department_name"
                                   data-value-field="id"
                                   data-bind="value: obj.new_department_id,
                                              source: newDepartmentDS,
                                              events:{change: newDepartmentChanges}"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width: 100%;" />
                        <br>
                            <input id="ddlNewOfficeType" name="ddlNewOfficeType"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-auto-bind="false"
                                   data-filter="startswith"
                                   data-text-field="office_type"
                                   data-value-field="id"
                                   data-bind="value: obj.new_office_type_id,
                                              source: newOfficeTypeDS,
                                              events:{change: newOfficeTypeChanges}"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width: 100%;" />
                        </td>
                    </tr>
                    <tr>
                        <td style="vertical-align: top;">ការិយាល័យ/អធិការដ្ឋាន</td>
                        <td>
                            <input id="ddlOffice" name="ddlOffice"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-auto-bind="false"
                                   data-filter="startswith"
                                   data-text-field="office_name"
                                   data-value-field="id"
                                   data-bind="value: obj.office_id,
                                              source: officeDS,
                                              events:{change: officeChanges}"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width: 100%;" />
                        <br>
                            <input id="ddlSectorType" name="ddlSectorType"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-auto-bind="false"
                                   data-filter="startswith"
                                   data-text-field="sector_type"
                                   data-value-field="id"
                                   data-bind="value: obj.sector_type_id,
                                              source: sectorTypeDS,
                                              events:{change: sectorTypeChanges}"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width: 100%;" />
                        </td>
                        <td>
                            <input id="ddlNewOffice" name="ddlNewOffice"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-auto-bind="false"
                                   data-filter="startswith"
                                   data-text-field="office_name"
                                   data-value-field="id"
                                   data-bind="value: obj.new_office_id,
                                              source: newOfficeDS,
                                              events:{change: newOfficeChanges}"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width: 100%;" />
                        <br>
                            <input id="ddlNewSectorType" name="ddlNewSectorType"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-auto-bind="false"
                                   data-filter="startswith"
                                   data-text-field="sector_type"
                                   data-value-field="id"
                                   data-bind="value: obj.new_sector_type_id,
                                              source: newSectorTypeDS,
                                              events:{change: newSectorTypeChanges}"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width: 100%;" />
                        </td>
                    </tr>
                    <tr>
                        <td>ផ្នែក/ប៉ុស្តិ៍</td>
                        <td>
                            <input id="ddlSector" name="ddlSector"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-auto-bind="false"
                                   data-filter="startswith"
                                   data-text-field="sector_name"
                                   data-value-field="id"
                                   data-bind="value: obj.sector_id,
                                              source: sectorDS"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width: 100%;" />
                        </td>
                        <td>
                            <input id="ddlNewSector" name="ddlNewSector"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-auto-bind="false"
                                   data-filter="startswith"
                                   data-text-field="sector_name"
                                   data-value-field="id"
                                   data-bind="value: obj.new_sector_id,
                                              source: newSectorDS"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width: 100%;" />
                        </td>
                    </tr>                                
                    <tr>
                        <td style="vertical-align: top;">មុខតំណែង</td>
                        <td style="vertical-align: top;">
                            <input id="ddlPosition" name="ddlPosition"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-filter="startswith"
                                   data-text-field="position_name"
                                   data-value-field="id"
                                   data-template="position-list-tmpl"
                                   data-bind="value: obj.position_id,
                                              source: positionDS"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width:100%;" />
                        </td>
                        <td style="vertical-align: top;">
                            <input id="ddlNewPosition" name="ddlNewPosition"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-filter="startswith"
                                   data-text-field="position_name"
                                   data-value-field="id"
                                   data-template="position-list-tmpl"
                                   data-bind="value: obj.new_position_id,
                                              source: newPositionDS"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width:100%;" />
                        </td>
                    </tr>
                    <tr>
                        <td>តួនាទីបន្ថែម</td>
                        <td>
                            <input id="ddlOtherPosition" name="ddlOtherPosition"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-filter="startswith"
                                   data-text-field="position_name"
                                   data-value-field="id"
                                   data-bind="value: obj.other_position_id,
                                              source: otherPositionDS"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width:100%" />
                        </td>
                        <td>
                            <input id="ddlNewOtherPosition" name="ddlNewOtherPosition"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-filter="startswith"
                                   data-text-field="position_name"
                                   data-value-field="id"
                                   data-bind="value: obj.new_other_position_id,
                                              source: newOtherPositionDS"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width:100%" />
                        </td>
                    </tr>
                    <tr>
                        <td>ឋានន្តរសក្តិ</td>
                        <td>
                            <input id="ddlRank" name="ddlRank"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-filter="startswith"
                                   data-text-field="rank_name"
                                   data-value-field="id"
                                   data-bind="value: obj.rank_id, 
                                              source: rankDS"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width:100%" />
                        </td>
                        <td>
                            <input id="ddlNewRank" name="ddlNewRank"
                                   data-role="dropdownlist"
                                   data-value-primitive="true"
                                   data-filter="startswith"
                                   data-text-field="rank_name"
                                   data-value-field="id"
                                   data-bind="value: obj.new_rank_id, 
                                              source: newRankDS"
                                   data-option-label="--- សូមជ្រើសរើស ---"
                                   style="width:100%" />
                        </td>
                    </tr>
                </table>

                <hr>

                <div class="row">
                    <div class="col-lg-4">
                        <fieldset class="form-group">
                            <label class="form-label semibold" for="dpkDateAnnounce">ថ្ងៃ - ខែ - ឆ្នាំ</label>
                            <input class="form-control"
                                   data-role="maskedtextbox"
                                   data-mask="00-00-0000"
                                   data-bind="value: obj.date_announce"
                                   style="width: 100%">
                        </fieldset>

                        <fieldset class="form-group">
                            <label class="form-label semibold" for="txtAnnounceNumber">លេខឯកសារ</label>
                            <div class="row">
                                <div class="col-lg-6">
                                    <input class="form-control"
                                           data-role="dropdownlist"
                                           data-value-primitive="true"
                                           data-filter="startswith"
                                           data-text-field="announce_type"
                                           data-value-field="id"
                                           data-bind="value: obj.announce_type_id, 
                                                      source: announceTypeDS"
                                           data-option-label="--- សូមជ្រើសរើស ---"
                                           style="width: 100%;" />
                                </div>
                                <div class="col-lg-6">
                                    <input type="text" class="form-control" id="txtAnnounceNumber" name="txtAnnounceNumber" 
                                        data-bind="value: obj.announce_number,
                                                    events:{change:checkExistingNumber}" 
                                        placeholder="eg: 123..."
                                        style="width: 100%;">
                                </div>
                            </div>
                        </fieldset>
                        
                        <fieldset class="form-group">
                            <label class="form-label semibold" for="txtDocumentNumber">លេខតំកល់ឯកសារ</label>
                            <input id="txtDocumentNumber" name="txtDocumentNumber" 
                                type="text" class="form-control"
                                data-bind="value: obj.document_number" 
                                placeholder="eg: 123..."
                                style="width: 100%;">
                        </fieldset>
                    </div>
                    <div class="col-lg-8">
                        <fieldset class="form-group">
                            <label class="form-label semibold" for="txtNumber">កំណត់សំគាល់</label>
                            <textarea data-role="editor"
                              data-tools="['bold',
                                           'italic',
                                           'underline',
                                           'strikethrough',
                                           'justifyLeft',
                                           'justifyCenter',
                                           'justifyRight',
                                           'justifyFull']"
                              data-bind="value: obj.memo"
                              style="height: 200px;"></textarea>
                        </fieldset>
                    </div>
                </div>

                <br>

                <!-- Table -->
                <div data-role="grid" class="costom-grid"
                     data-column-menu="true"
                     data-reorderable="true"
                     data-scrollable="false"
                     data-resizable="true"
                     data-editable="true"
                     data-columns="[
                        { 
                            title:'ល.រ',
                            width: '50px', 
                            attributes: { style: 'text-align: center;' }, 
                            template: function (dataItem) {
                                return app.departmentRecord.dataSource.indexOf(dataItem)+1;
                            }
                        },
                        { field: 'staffs', title: 'ឈ្មោះ', editor: staffEditor, template: '#=staffs.staff_number# #=staffs.surname_kh# #=staffs.name_kh#' },
                        { command: 'destroy', title: '&nbsp;', width: '100px' }
                     ]"
                     data-auto-bind="false"
                     data-bind="source: dataSource"></div>

                <button type="button" class="btn btn-inline" data-bind="click: addRow"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button>

                <br>

                <!-- Form actions -->
                <div class="box-typical box-typical-padding" align="right">
                    <div id="ntf1" data-role="notification"></div>

                    <!-- Delete Confirmation -->
                    <div data-role="window"
                         data-title="Delete Confirmation"
                         data-width="350"
                         data-height="200"
                         data-iframe="true"
                         data-modal="true"
                         data-visible="false"
                         data-position="{top:'40%',left:'35%'}"
                         data-actions="{}"
                         data-resizable="false"
                         data-bind="visible: showConfirm"
                         style="text-align:center;">
                        <p style="font-size:25px; margin: 15px 0 25px;" class="delete-message" data-bind="text: confirmMessage"></p>
                        <button style="font-size:14px; border:none; background:#496cad; color:#fff; padding:5px 25px;" data-bind="click:delete">Yes</button> 
                        <button style="font-size:14px; border:none; background:red; color:#fff; padding:5px 25px;" data-bind="click:closeConfirm">No</button>
                    </div>
                    <!-- // Delete Confirmation -->

                    <button id="saveNew" type="button" class="btn btn-inline btn-primary-outline">
                        <i class="fa fa-save"></i>&nbsp;
                        រក្សាទុក
                    </button>                   
                    <button id="saveClose" type="button" class="btn btn-inline btn-success-outline">
                        <i class="fa fa-power-off"></i>&nbsp;
                        បិទ
                    </button>
                    <button type="button" class="btn btn-inline btn-secondary-outline">
                        <i class="fa fa-print"></i>&nbsp;
                        បោះពុម្ព
                    </button>                   
                    <button type="button" class="btn btn-inline btn-warning-outline" 
                        onclick="javascript:window.history.back()" data-bind="click: cancel">
                        <i class="fa fa-remove"></i>&nbsp;
                        មោឃះ
                    </button>
                    <button type="button" class="btn btn-inline btn-danger-outline"
                        data-bind="click: openConfirm, visible: isEdit">
                        <i class="fa fa-trash-o"></i>&nbsp;
                        លុប
                    </button>                                               
                </div>
                <!-- // Form actions END -->

            </div>
        </div>
    </div>
</script>
<script id="k8ReportCenter" type="text/x-kendo-template">
    <div class="container">         
        <div class="wrapper-background">
            <div id="example" class="new-staff">
                <h2>ពត៌មាន</h2>
                <div class="row">
                    <div class="col-xl-6">
                        <div class="class="box-typical box-typical-padding"">
                            <div class="row">
                                <div class="col-sm-6">
                                    <ul>
                                        <li>
                                            <a href="#/date_of_birth_report">ពិនិត្យថ្ងៃកំណើត</a>
                                        </li>
                                        <li>Button tags</li>
                                        <li>Outline buttons</li>
                                        <li>Sizes
                                            <ul>
                                                <li>Button plugin</li>
                                                <li>Toggle states</li>
                                            </ul>
                                        </li>
                                        <li>Examples</li>
                                        <li>Button tags</li>
                                        <li>Outline buttons</li>
                                    </ul>
                                </div>
                                <div class="col-sm-6">
                                    <ol>
                                        <li>Examples</li>
                                        <li>Button tags</li>
                                        <li>Outline buttons</li>
                                        <li>Sizes</li>
                                        <li>Active state</li>
                                        <li>Disabled state</li>
                                        <li>Button plugin</li>
                                        <li>Toggle states</li>
                                        <li>Checkbox and radio buttons</li>
                                    </ol>
                                </div>
                            </div>
                        </div><!--.chart-statistic-box-->
                    </div><!--.col-->
                    <div class="col-xl-6">
                        
                    </div><!--.col-->
                </div>              
            </div>
        </div>
    </div>
</script>
<script id="dateOfBirthReport" type="text/x-kendo-template">
    <div class="container">         
        <div class="wrapper-background">
            <div id="example">

                <!-- Search Taps -->
                <section class="tabs-section">
                    <div class="tabs-section-nav tabs-section-nav-icons">
                        <div class="tbl">
                            <ul class="nav" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" href="#tabs-1-tab-1" role="tab" data-toggle="tab">
                                        <span class="nav-link-in">
                                            <span class="glyphicon glyphicon-search"></span>
                                            ស្វែងរក
                                        </span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#tabs-1-tab-2" role="tab" data-toggle="tab">
                                        <span class="nav-link-in">
                                            <span class="font-icon font-icon-build"></span>
                                            អង្គភាព
                                        </span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#tabs-1-tab-3" role="tab" data-toggle="tab">
                                        <span class="nav-link-in">
                                            <i class="fa fa-list"></i>
                                            ផ្សេងៗ
                                        </span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div><!--.tabs-section-nav-->

                    <div class="tab-content">
                        <!-- Default -->
                        <div role="tabpanel" class="tab-pane fade in active" id="tabs-1-tab-1">
                        </div><!-- End Default -->
                        
                        <!-- Departments -->
                        <div role="tabpanel" class="tab-pane fade" id="tabs-1-tab-2">
                            <table class="table table-striped">
                                <tr>
                                    <td style="vertical-align: top;">អង្គភាពថ្នាក់ស្មើអគ្គ/ក្រសួង</td>
                                    <td>
                                        <input id="ddlGeneral" name="ddlGeneral"
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-filter="startswith"
                                               data-text-field="general_commissariat_name"
                                               data-value-field="id"
                                               data-bind="value: filters.general_commissariat_id, 
                                                          source: generalCommissariatDS,
                                                          events:{change: generalChanges}"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width: 100%;" />
                                        
                                        <br>

                                        <input id="ddlDepartmentType" name="ddlDepartmentType"
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-auto-bind="false"
                                               data-filter="startswith"
                                               data-text-field="department_type"
                                               data-value-field="id"
                                               data-bind="value: filters.department_type_id,
                                                          source: departmentTypeDS,
                                                          events:{change: departmentTypeChanges}"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width: 100%;" />                            
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;">នាយកដ្ឋាន/ស្នងការដ្ឋាន</td>
                                    <td>
                                        <input id="ddlDepartment" name="ddlDepartment"
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-auto-bind="false"
                                               data-filter="startswith"
                                               data-text-field="department_name"
                                               data-value-field="id"
                                               data-bind="value: filters.department_id,
                                                          source: departmentDS,
                                                          events:{change: departmentChanges}"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width: 100%;" />                            
                                    
                                    <br>

                                        <input id="ddlOfficeType" name="ddlOfficeType"
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-auto-bind="false"
                                               data-filter="startswith"
                                               data-text-field="office_type"
                                               data-value-field="id"
                                               data-bind="value: filters.office_type_id,
                                                          source: officeTypeDS,
                                                          events:{change: officeTypeChanges}"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width: 100%;" />
                                    </td>
                                </tr>
                                <tr>
                                    <td style="vertical-align: top;">ការិយាល័យ/អធិការដ្ឋាន</td>
                                    <td>
                                        <input id="ddlOffice" name="ddlOffice"
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-auto-bind="false"
                                               data-filter="startswith"
                                               data-text-field="office_name"
                                               data-value-field="id"
                                               data-bind="value: filters.office_id,
                                                          source: officeDS,
                                                          events:{change: officeChanges}"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width: 100%;" />
                                    
                                    <br>

                                        <input id="ddlSectorType" name="ddlSectorType"
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-auto-bind="false"
                                               data-filter="startswith"
                                               data-text-field="sector_type"
                                               data-value-field="id"
                                               data-bind="value: filters.sector_type_id,
                                                          source: sectorTypeDS,
                                                          events:{change: sectorTypeChanges}"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width: 100%;" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>ផ្នែក/ប៉ុស្តិ៍</td>
                                    <td>
                                        <input id="ddlSector" name="ddlSector"
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-auto-bind="false"
                                               data-filter="startswith"
                                               data-text-field="sector_name"
                                               data-value-field="id"
                                               data-bind="value: filters.sector_id,
                                                          source: sectorDS"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width: 100%;" />
                                    </td>
                                </tr>                                
                                <tr>
                                    <td style="vertical-align: top;">មុខតំណែង</td>
                                    <td style="vertical-align: top;">
                                        <input id="ddlPosition" name="ddlPosition"                                             
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-filter="startswith"
                                               data-text-field="position_name"
                                               data-value-field="id"
                                               data-template="position-list-tmpl"
                                               data-bind="value: filters.position_id,
                                                          source: positionDS"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width:100%;" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>តួនាទីបន្ថែម</td>
                                    <td>
                                        <input id="ddlOtherPosition" name="ddlOtherPosition"
                                               data-role="dropdownlist"                                           
                                               data-value-primitive="true"
                                               data-filter="startswith"
                                               data-text-field="position_name"
                                               data-value-field="id"
                                               data-bind="value: filters.other_position_id,
                                                          source: otherPositionDS"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                               style="width:100%" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>ឋានន្តរសក្តិ</td>
                                    <td>
                                        <input id="ddlRank" name="ddlRank"
                                               data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-filter="startswith"
                                               data-text-field="rank_name"
                                               data-value-field="id"
                                               data-bind="value: filters.rank_id, 
                                                          source: rankDS"
                                               data-option-label="--- សូមជ្រើសរើស ---"
                                           style="width:100%" />
                                </td>
                            </tr>
                        </table>
                        </div><!-- End Departments -->
                        
                        <!-- Others -->
                        <div role="tabpanel" class="tab-pane fade" id="tabs-1-tab-3">
                            <table class="table table-striped">
                                <tr>
                                    <td>ថ្ងៃកំណើត</td>
                                    <td colspan="3">
                                        <input data-role="datepicker"
                                               data-format="dd-MM-yyyy"
                                               data-bind="value: filters.start_dob,
                                                          max: end_dob"
                                               placeholder="ចាប់ពី..." >

                                        <input data-role="datepicker"
                                               data-format="dd-MM-yyyy"
                                               data-bind="value: filters.end_dob,
                                                          min: start_dob"
                                               placeholder="ដល់..." >
                                    </td>
                                </tr>
                                <tr>
                                    <td>ថ្ងៃចូលបំរើការងារ</td>
                                    <td colspan="3">
                                        <input data-role="datepicker"
                                               data-format="dd-MM-yyyy"
                                               data-bind="value: filters.start_entry,
                                                          max: end_entry"
                                               placeholder="ចាប់ពី..." >

                                        <input data-role="datepicker"
                                               data-format="dd-MM-yyyy"
                                               data-bind="value: filters.end_entry,
                                                          min: start_entry"
                                               placeholder="ដល់..." >

                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.entried_announce_type,
                                                          source: announceTypeList"
                                               data-option-label="គ្រប់​ ប្រកាស..." />

                                        <input type="text" class="k-textbox" data-bind="value: filters.entried_number" placeholder="លេខប្រកាស..." />
                                    </td>
                                </tr>                                
                                <tr>
                                    <td>ថ្ងៃចូលនិវត្តន៍</td>
                                    <td colspan="3">
                                        <input data-role="datepicker"
                                               data-format="dd-MM-yyyy"
                                               data-bind="value: filters.start_retired,
                                                          max: end_retired"
                                               placeholder="ចាប់ពី..." >

                                        <input data-role="datepicker"
                                               data-format="dd-MM-yyyy"
                                               data-bind="value: filters.end_retired,
                                                          min: start_retired"
                                               placeholder="ដល់..." >

                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.retired_announce_type,
                                                          source: announceTypeList"
                                               data-option-label="គ្រប់​ ប្រកាស..." />

                                        <input type="text" class="k-textbox" data-bind="value: filters.retired_number" placeholder="លេខប្រកាស..." />
                                    </td>
                                </tr>
                                <tr>
                                    <td>ស្ថានភាពការងារ</td>
                                    <td colspan="3">
                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.staff_status,
                                                          source: statusList"
                                               data-option-label="គ្រប់​ ស្ថានភាព..." />
                                    </td>
                                </tr>
                                <tr>
                                    <td>សៀវភៅពិសា្ដរ</td>
                                    <td>
                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.background_book,
                                                          source: hasOrNoList"
                                               data-option-label="ទាំងអស់..." />
                                    </td>
                                    <td>ជីវប្រវត្តិសង្ខេប</td>
                                    <td>
                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.background,
                                                          source: hasOrNoList"
                                               data-option-label="ទាំងអស់..." />
                                    </td>
                                </tr>
                                <tr>                                    
                                    <td>ប្រាក់បៀវត្សរ៍</td>
                                    <td>
                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.payroll,
                                                          source: hasOrNoList"
                                               data-option-label="ទាំងអស់..." />
                                    </td>
                                    <td>អនុវត្តន៍វិន័យ</td>
                                    <td>
                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.punistment,
                                                          source: hasOrNoList"
                                               data-option-label="ទាំងអស់..." />
                                    </td>
                                </tr>
                                <tr>
                                    <td>ភេទ</td>
                                    <td>
                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.gender,
                                                          source: genderList"
                                               data-option-label="ទាំងអស់..." />
                                    </td>
                                    <td>ឯកសារយកចេញ</td>
                                    <td>
                                        <input data-role="dropdownlist"
                                               data-value-primitive="true"
                                               data-text-field="text"
                                               data-value-field="value"
                                               data-bind="value: filters.document_movement,
                                                          source: movementList"
                                               data-option-label="ទាំងអស់..." />
                                    </td>
                                </tr>
                            </table>
                        </div><!-- End Others -->
                    </div><!--.tab-content-->

                    <!-- Search Box -->                 
                    <section class="proj-page-add-txt">
                        <input type="text" class="form-control" 
                                data-bind="value: filters.searchText" 
                                placeholder="អត្តលេខ / ឈ្មោះជាអក្សរខ្មែរ / ឈ្មោះជាអក្សរឡាតាំង ...">
                        <button type="button" class="btn" data-bind="click: search">
                            <i class="font-icon font-icon-search"></i>
                        </button>                                               
                    </section>              

                    <!-- Summary -->
                    <div class="widget-tabs-nav colored">
                        <ul class="tbl-row" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link blue">
                                    <i class="font-icon font-icon-users-two"></i>
                                    <span data-format="n0" data-bind="text: dataSource.total()" style="font-size: 25px;margin-top: -9px; display: inline-block;"></span>
                                    <span style="font-size: 20px;margin-top: -9px; display: inline-block;">នាក់</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link orange">
                                    <i class="font-icon font-icon-award"></i>
                                    <span style="font-size: 25px;margin-top: -9px; display: inline-block;">5 386</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link green">
                                    <i class="font-icon font-icon-eye"></i>
                                    <span style="font-size: 25px;margin-top: -9px; display: inline-block;">24 953</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </section>

                <!-- Table List -->
                <div class="table-responsive">
                    <table class="table table-striped dataTable">
                        <thead>
                            <tr>
                                <th style="width:1%; border-left: 1px solid #d8e2e7;"></th>
                                <th>អត្តលេខ</th>
                                <th>ឈ្មោះ</th>
                                <th>ឋានន្តរសក្តិ</th>
                                <th>មុខតំណែង</th>
                                <th style="border-right: 1px solid #d8e2e7;">អង្គភាព</th>
                            </tr>
                        </thead>
                        <tbody data-role="listview"
                                data-template="k8Center-template"                               
                                data-auto-bind="false" 
                                data-bind="source: dataSource"></tbody>
                    </table>
                </div>
                <div class="k-pager-wrap" 
                        data-role="pager"
                        data-auto-bind="false" 
                        data-bind="source: dataSource"></div>

            </div>
        </div>
    </div>
</script>


<!-- *************************************
*   Personal Department Home Section   *
************************************** -->
<script id="personalDepartmentHome" type="text/x-kendo-template">
    <div class="container">
        <div class="row home-dashbaord">
            <div class="col-sm-12 home-thumbnail">
                <img src="assets/img/plogo.gif" class="img-responsive" alt="Responsive image">
                <br><br>
                <h2 style="text-align: center;">សូមស្វាគមន៍</h2>
            </div>
            <div class="col-sm-12 home-menu">
                <div class="row">

                    <div class="col-sm-4 col-xl-3">
                        <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/business-administration-icon1.jpg">
                                </div>
                                <div class="task-card-footer">
                                    <h3>ការិយាល័យរដ្ឋបាល​ (ក១)</h3>
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->

                    <div class="col-sm-4 col-xl-3">
                        <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/salute.jpg">
                                </div>
                                <div class="task-card-footer">
                                    <h3>ការិយាល័យក្របខណ្ឌ​ (ក២)</h3>
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->

                    <div class="col-sm-4 col-xl-3">
                        <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/officer_rank.png">
                                </div>
                                <div class="task-card-footer">
                                    <h3>ការិយាល័យគ្រប់គ្រងបុគ្គលិកនាយកដ្ឋាន​ (ក៣)</h3>
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->

                    <div class="col-sm-4 col-xl-3">
                        <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/officer_rank.jpg">
                                </div>
                                <div class="task-card-footer">
                                     <h3>ការិយាល័យគ្រប់គ្រងបុគ្គលិក​ រាជធានី-ខេត្ត​ (ក៤)</h3>
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->
             
                    <div class="col-sm-4 col-xl-3">
                        <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/retirement.png">
                                </div>
                                <div class="task-card-footer">
                                    <h3>ការិយាល័យគោលនយោបាយសោធន៍និវត្តនគរបាលជាតិ​ (ក៥)</h3>
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->

                    <div class="col-sm-4 col-xl-3">
                        <a href="#/personal_department_home">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/riel.png">
                                </div>
                                <div class="task-card-footer">
                                    <h3>ការិយាល័យបៀវត្សរ៍​នគរបាលជាតិ (ក៦)</h3>
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->

                    <div class="col-sm-4 col-xl-3">
                        <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/Training-icon.png">
                                </div>
                                <div class="task-card-footer">
                                    <h3>ការិយាល័យបណ្ដុះបណ្ដាល (ក៧)</h3>
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->

                    <div class="col-sm-4 col-xl-3">
                         <a href="#/k8_home">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/documents-icon.jpg">
                                </div>
                                <div class="task-card-footer">
                                    <h3>ការិយាល័យគ្រប់គ្រង​​ឯកសារ (ក៨)</h3>     
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->
               
                    <div class="col-sm-4 col-xl-3">
                         <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/discipline_icon.png">
                                </div>
                                <div class="task-card-footer">
                                    <h3>ការិយាល័យអនុវត្តន៍វិន័យ (ក៩)</h3>           
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->

                    <div class="col-sm-4 col-xl-3">
                        <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/Medal-icon.png">
                                </div>
                                <div class="task-card-footer">
                                    <h3>ការិយាល័យលើកសរសើរ (ក១០)</h3>        
                                </div>
                            </section>
                        </a>
                    </div><!--.col-->

                    <div class="col-sm-4 col-xl-3">
                         <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/report.png">
                                </div>
                                <div class="task-card-footer">
                                    <h3>របាយការណ៍</h3>      
                                </div>
                            </section>
                        </a>
                    </div><!--.col--> 

                    <div class="col-sm-4 col-xl-3">
                         <a href="#/">
                            <section class="box-typical task-card task">
                                <div class="task-card-photo">
                                    <img src="assets/img/Police Friendship Association.jpg">
                                </div>
                                <div class="task-card-footer">
                                    <h3>សមាគមន៍មិត្តនគរបាលជាតិកម្ពុជា</h3>      
                                </div>
                            </section>
                        </a>
                    </div><!--.col--> 

                </div>           
            </div>
        </div>
    </div>
</script>


<!-- ***************************
*   Template List Section     *
**************************** -->
<script id="staff-list-tmpl" type="text/x-kendo-tmpl">
    <span>#=staff_number#</span>
    <span>#=surname_kh# #=name_kh#</span>
</script>
<script id="position-list-tmpl" type="text/x-kendo-tmpl">
    <span class="pull-left">#=position_name#</span>
    <span class="pull-right">#=description#</span>
</script>


<!-- ***************************
*   Editor List Template Section     *
**************************** -->
<script type="text/javascript">
    function staffEditor(container, options) {
        $('<input name="' + options.field + '" />')
        .appendTo(container)
        .kendoDropDownList({
            optionLabel: "--- សូមជ្រើសរើស ---",
            filter: "contains",         
            dataTextField: "name_kh",
            dataValueField: "id",
            autoWidth: true,
            height: 200,
            template: kendo.template($("#staff-list-tmpl").html()),
            dataSource: dataStore("staff_id", apiUrl+"staffs")
        });
    }
</script>


<!-- ***************************
*   Menu Section               *
**************************** -->
<script id="k8Menu" type="text/x-kendo-template">
    <div class="secondary-menu">
        
        <div class="dropdown dropdown-typical">
            <a href="#/k8_home">
                <span class="font-icon home-icon font-icon-home hidden-sm hidden-xs "></span>
                <span class="lbl hidden-lg hidden-md">Home</span> 
            </a>
        </div>
        
        <div class="dropdown dropdown-typical">
            <a href="#/k8_center" >
                បុគ្គលិក
            </a>
        </div>      

        <div class="dropdown dropdown-typical">
            <a class="dropdown-toggle" id="dd-header-form-builder" data-target="#" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <span class="glyphicon glyphicon-briefcase hidden-sm hidden-xs"></span>
            </a>
            <div class="dropdown-menu" aria-labelledby="dd-header-form-builder">
                <a class="dropdown-item" href="#/staff"><i class="fa fa-user-plus"></i> បញ្ជូលបុគ្គលិកថ្មី</a>                
                <a class="dropdown-item" href="#/deparment_record"><span class="font-icon font-icon-revers"></span>ផ្ទេរភារកិច្ច តែងតាំងមុខតំណែង​ និង​ ឋានន្តរសក្តិ</a>
                <a class="dropdown-item" href="#"><span class="font-icon font-icon-speed"></span>Prep Official App</a>
                <a class="dropdown-item" href="#"><span class="font-icon font-icon-users"></span>CATprer Test</a>
                <a class="dropdown-item" href="#"><span class="font-icon font-icon-comments"></span>Third Party Test</a>
            </div>
        </div>

        <div class="dropdown dropdown-typical">
            <a href="#/k8_report_center">
                ពត៌មាន             
            </a>
        </div>
        
    </div>
</script>

<!-- Others -->
<script src="https://s3-ap-southeast-1.amazonaws.com/app-data-20160518/components/js/libs/localforage.min.js"></script>

<!--Start UI JS -->
<script type="text/javascript" src="assets/js/lib/tether/tether.min.js"></script>
<script type="text/javascript" src="assets/js/lib/bootstrap/bootstrap.min.js"></script>
<script type="text/javascript" src="assets/js/plugins.js"></script>
<script type="text/javascript" src="assets/js/lib/jqueryui/jquery-ui.min.js"></script>
<script type="text/javascript" src="assets/js/lib/lobipanel/lobipanel.min.js"></script>
<script type="text/javascript" src="assets/js/lib/match-height/jquery.matchHeight.min.js"></script>

<!-- Codes -->
<script>
    localforage.config({
        driver: localforage.LOCALSTORAGE,
        name: 'userData'
    });
    var app = app || {};
    var baseUrl = window.location.origin;
    var apiUrl = baseUrl + "/api/";
    app.pageLoaded = {};
    app.userData = JSON.parse(localStorage.getItem('userData/user')) ? JSON.parse(localStorage.getItem('userData/user')) : "";
    function signout(){
        //Logout
        var url = apiUrl + "Users/logout?access_token=" + app.userData.id;
        $.ajax({
            url: url,
            type: "POST",
            dataType: "json"
        });

        //Clear user data
        localforage.removeItem('user').then(function() {
            // Run this code once the key has been removed.
            console.log('Key is cleared!');
        }).catch(function(err) {
            // This code runs if there were any errors
            console.log(err);
        });

        //Redirect to signin page
        window.location.replace(baseUrl + "/signin.html");
    }
    function getFilters(options){
        var filter = {};

        if(options.filter){
            $.each(options.filter.filters, function(index, value){
                if(value.include){
                    filter["include"] = value.include;
                }else if(value.where){
                    filter["where"] = value.where;
                }else{
                    if(filter["where"] === undefined){
                        filter["where"] = {};
                    }

                    if(value.operator){
                        if(filter["where"][value.field] === undefined){
                            filter["where"][value.field] = {};
                        }

                        if(value.operator=="startswith"){
                            filter["where"][value.field]["like"] = value.value+"%";
                        }else if(value.operator=="contains"){
                            filter["where"][value.field]["like"] = "%"+value.value+"%";
                        }else{
                            filter["where"][value.field][value.operator] = value.value;
                        }                                        
                    }else{
                        filter["where"][value.field] = value.value;
                    }
                }
            });
        }

        filter["skip"] = options.skip;
        filter["limit"] = options.take;
        filter["order"] = options.sort;
        
        return {
            "filter"        : filter
        };
    }
    var dataStore = function(id, url) {
        var accessToken = "?access_token=" + app.userData.id;
        var o = new kendo.data.DataSource({
            transport: {
                read:  {
                    url: url + accessToken,
                    type: "GET",
                    dataType: "json"
                },
                create: {
                    url: url + accessToken,
                    type: "POST",
                    dataType: "json"
                },                
                update: {
                    url: url + accessToken,
                    type: "PUT",
                    dataType: "json"
                },
                destroy:  {
                    url: url + accessToken,
                    type: "DELETE",
                    dataType: "json"
                },
                parameterMap: function(options, operation) {
                    if(operation === 'read') {
                        return getFilters(options);
                    }else{
                        return options;
                    }

                    // if (operation !== "read" && options.models) {
                    //     return {
                    //         models: kendo.stringify(options.models)
                    //     };
                    // }
                }
            },
            schema: {
                model: { id: id },
                data: "data",
                total: "total"
            },
            batch: true,
            page:1,
            pageSize:100,
            serverPaging:true,
            serverSorting:true,
            serverFiltering:true
        });
        return o;
    };
    app.Layout = kendo.observable({
        menu    : [],
        // init: function() {
        //  // initialize when the whole page load
        // },
        // ui: function() {
        //  // get UI information from source base on locale
        // }
    });
    app.index = kendo.observable({           
        pageLoad  : function(){}
    });
    app.users = kendo.observable({
        dataSource      : dataStore("id", apiUrl + "departments"),
        email           : "admin@bar.com",
        username        : "admin",
        password        : "xxx",
        access_token    : "",
        user_id         : "/1",
        pageLoad        : function(){
        },
        signUp          : function(){
            //Register
            $.ajax({
                url: apiUrl + "Users",
                type: "POST",
                dataType: "json",
                data: {
                   "username": this.get("username"),
                   "email": this.get("email"),
                   "password": this.get("password")
                }
            }).done(function( result ) {
                console.log(result);
            });
        },
        getLogin        : function(){
            var self = this;

            $.ajax({
                url: apiUrl + "Users/login",
                type: "POST",
                dataType: "json",
                data: {
                    "username": this.get("username"),
                    "password": this.get("password")
                }
            }).done(function( result ) {
                if (result) {
                    self.set("access_token", result.data.id);
                    app.userData = result.data;
                    localforage.setItem('user', result.data);
                }
            });
        },
        getLogout       : function(){
            var url = apiUrl + "Users/logout?access_token=" + app.userData.id;
            
            $.ajax({
                url: url,
                type: "POST",
                dataType: "json"
            }).done(function( result ) {
                console.log(result);

                localforage.removeItem('user').then(function() {
                    // Run this code once the key has been removed.
                    console.log('Key is cleared!');
                }).catch(function(err) {
                    // This code runs if there were any errors
                    console.log(err);
                });
                window.location.replace(baseUrl + "/login.html");
            });
        },
        getUser         : function(){
            var url = apiUrl + "Users" + this.get("user_id") + "?access_token=" + this.get("access_token");

            $.ajax({
                url: url,
                type: "GET",
                dataType: "json"
            }).done(function( result ) {
                if (result) {
                    console.log(result.data);
                }
            });
        },
        deleteAccessToken: function(){
            var url = apiUrl + "Users" + this.get("user_id") + "?access_token=" + this.get("access_token");

            $.ajax({
                url: url,
                type: "DELETE",
                dataType: "json"
            }).done(function( result ) {
                console.log(result);
            });
        },
        getDepartment   : function(){
            var url = apiUrl + "departments",
            token = this.get("access_token");

            if(token!==""){
                url += "?access_token=" + token;
            }

            $.ajax({
                url: url,
                type: "GET",
                dataType: "json"
            }).done(function( result ) {
                if (result) {
                    console.log(result.data);
                }
            });
        }
    });


    //SOURCES -----------------------------------------------------------------------------------------
    app.source = kendo.observable({
        tokenDS                         : dataStore("id", apiUrl + "tokens"),
        generalCommissariatList         : [],
        generalCommissariatDS           : dataStore("general_commissariat_id", apiUrl + "general_commissariats"),
        departmentTypeList              : [],
        departmentTypeDS                : dataStore("department_type_id", apiUrl + "department_types"),
        departmentList                  : [],
        departmentDS                    : dataStore("department_id", apiUrl + "departments"),
        officeTypeList                  : [],
        officeTypeDS                    : dataStore("office_type_id", apiUrl + "office_types"),
        officeList                      : [],
        officeDS                        : dataStore("office_id", apiUrl + "offices"),
        sectorTypeList                  : [],
        sectorTypeDS                    : dataStore("sector_type_id", apiUrl + "sector_types"),
        sectorList                      : [],
        sectorDS                        : dataStore("sector_id", apiUrl + "sectors"),
        rankList                        : [],
        rankDS                          : dataStore("rank_id", apiUrl + "ranks"),
        positionList                    : [],
        positionDS                      : dataStore("position_id", apiUrl + "positions"),
        positionGroupList               : [],
        positionGroupDS                 : dataStore("position_group_id", apiUrl + "position_groups"),
        sortList                        : [
            { text:"All", value: "all" },
            { text:"Today", value: "today" },
            { text:"This Week", value: "week" },
            { text:"This Month", value: "month" },
            { text:"This Year", value: "year" }
        ],
        statusList                      : [
            { value: 1, text: "Active" },
            { value: 0, text: "Inactive" },
            { value: 2, text: "Void" }
        ],
        announceTypeList                : [
            { value: 1, text: "សសរ" },
            { value: 2, text: "ប្រក" },
            { value: 3, text: "អនក្រ" },
            { value: 4, text: "នស/រកត" },
            { value: 5, text: "ដក" }
        ],
        hasOrNoList                     : [
            { value: 1, text: "មាន" },
            { value: 0, text: "គ្មាន" }
        ],
        maritalStatusList                     : [
            { value: 1, text: "នៅលីវ" },
            { value: 2, text: "មានគ្រួសារ" },
            { value: 0, text: "ពោះម៉ាយ/ម៉េម៉ាយ" }
        ],
        movementList                    : [
            { value: 1, text: "In" },
            { value: 0, text: "Out" }
        ],
        genderList                      : [
            { value: 1, text: "ប្រុស" },
            { value: 0, text: "ស្រី" }
        ],
        successMessage                  : "Saved Successful!",
        errorMessage                    : "Warning, please review it again!",
        confirmMessage                  : "Are you sure, you want to delete it?",
        duplicateNumber                 : "លេខស្ទួន",
        test:function(){
            var self = this;

            // this.departmentDS.filter({field:"general_commissariat_id", value: 2});
            this.departmentDS.filter([
                {field:"general_commissariat_id", value: 2},
                {field:"department_type_id", value: 12}
            ]);

            // this.departmentDS.filter({
            //     where: { 
            //         general_commissariat_id: 2,
            //         department_type_id: 12 
            //     }
            // });

            // this.departmentDS.filter({ field:"general_commissariat_id", value: 7 });

            // this.positionDS.query({
            //     filter:{
            //         include: {
            //             relation: 'position_groups', 
            //             scope: {
            //                 fields:['position_id'],
            //                 where: {
            //                     general_commissariat_id: 12
            //                 }
            //             }
            //         }
            //     }
            // }).then(function(){
            //     var view = self.positionDS.view();

            //     var counter = 0;
            //     $.each(view, function(index, value){
            //         if(value.position_groups.length>0){
            //             counter++;
            //         }
            //     });

            //     console.log("counter: "+counter);
            // });
        },
        pageLoad                        : function(){
            this.loadGeneralCommissariats();
            this.loadDepartmentTypes();
            this.loadDepartments();
            this.loadOfficeTypes();
            this.loadOffices();
            this.loadSectorTypes();
            this.loadSectors();            
            this.loadPositions();
            this.loadPositionGroups();
            this.loadRanks();
        },
        loadGeneralCommissariats        : function(){
            var self = this, raw = this.get("generalCommissariatList");

            //Clear array
            if(raw.length>0){
                raw.splice(0,raw.length);
            }
            
            this.generalCommissariatDS.query({
                filter: []
            }).then(function(){
                var view = self.generalCommissariatDS.view();

                $.each(view, function(index, value){
                    raw.push(value);
                });
            });
        },
        loadDepartmentTypes             : function(){
            var self = this, raw = this.get("departmentTypeList");

            //Clear array
            if(raw.length>0){
                raw.splice(0,raw.length);
            }

            this.departmentTypeDS.query({
                filter: []
            }).then(function(){
                var view = self.departmentTypeDS.view();

                $.each(view, function(index, value){
                    raw.push(value);
                });
            });
        },
        loadDepartments                 : function(){
            var self = this, raw = this.get("departmentList");

            //Clear array
            if(raw.length>0){
                raw.splice(0,raw.length);
            }

            this.departmentDS.query({
                filter: []
            }).then(function(){
                var view = self.departmentDS.view();

                $.each(view, function(index, value){
                    raw.push(value);
                });
            });
        },
        loadOfficeTypes                 : function(){
            var self = this, raw = this.get("officeTypeList");

            //Clear array
            if(raw.length>0){
                raw.splice(0,raw.length);
            }

            this.officeTypeDS.query({
                filter: []
            }).then(function(){
                var view = self.officeTypeDS.view();

                $.each(view, function(index, value){
                    raw.push(value);
                });
            });
        },
        loadOffices                     : function(){
            var self = this, raw = this.get("officeList");

            //Clear array
            if(raw.length>0){
                raw.splice(0,raw.length);
            }

            this.officeDS.query({
                filter: []
            }).then(function(){
                var view = self.officeDS.view();

                $.each(view, function(index, value){
                    raw.push(value);
                });
            });
        },
        loadSectorTypes                 : function(){
            var self = this, raw = this.get("sectorTypeList");

            //Clear array
            if(raw.length>0){
                raw.splice(0,raw.length);
            }

            this.sectorTypeDS.query({
                filter: []
            }).then(function(){
                var view = self.sectorTypeDS.view();

                $.each(view, function(index, value){
                    raw.push(value);
                });
            });
        },
        loadSectors                     : function(){
            var self = this, raw = this.get("sectorList");

            //Clear array
            if(raw.length>0){
                raw.splice(0,raw.length);
            }

            this.sectorDS.query({
                filter: []
            }).then(function(){
                var view = self.sectorDS.view();

                $.each(view, function(index, value){
                    raw.push(value);
                });
            });
        },
        loadPositions                   : function(){
            var self = this, raw = this.get("positionList");

            //Clear array
            if(raw.length>0){
                raw.splice(0,raw.length);
            }

            this.positionDS.query({
                filter: []
            }).then(function(){
                var view = self.positionDS.view();

                $.each(view, function(index, value){
                    raw.push(value);
                });
            });
        },
        loadPositionGroups              : function(){
            var self = this, raw = this.get("positionGroupList");

            //Clear array
            if(raw.length>0){
                raw.splice(0,raw.length);
            }

            this.positionGroupDS.query({
                filter: []
            }).then(function(){
                var view = self.positionGroupDS.view();

                $.each(view, function(index, value){
                    raw.push(value);
                });
            });
        },
        loadRanks                       : function(){
            var self = this, raw = this.get("rankList");

            //Clear array
            if(raw.length>0){
                raw.splice(0,raw.length);
            }

            this.rankDS.query({
                filter: []
            }).then(function(){
                var view = self.rankDS.view();

                $.each(view, function(index, value){
                    raw.push(value);
                });
            });
        }
    });

    //Custom widget datepicker for min and max
    kendo.data.binders.widget.max = kendo.data.Binder.extend({
        init: function(widget, bindings, options) {//call the base constructor
            kendo.data.Binder.fn.init.call(this, widget.element[0], bindings, options);
        },
        refresh: function() {
            var that = this,
            value = that.bindings["max"].get(); //get the value from the View-Model
            $(that.element).data("kendoDatePicker").max(value); //update the widget
        }
    });
    kendo.data.binders.widget.min = kendo.data.Binder.extend({
        init: function(widget, bindings, options) {
            //call the base constructor
            kendo.data.Binder.fn.init.call(this, widget.element[0], bindings, options);
        },
        refresh: function() {
            var that = this,
            value = that.bindings["min"].get(); //get the value from the View-Model
            $(that.element).data("kendoDatePicker").min(value); //update the widget
        }
    });



    /*************************
    *  K8 Section   *
    **************************/
    app.k8Home = kendo.observable({
        pageLoad        : function(){
        }
    });
    app.k8Center = kendo.observable({
        dataSource                  : dataStore("staff_id", apiUrl + "staffs"),
        generalCommissariatDS       : dataStore("general_commissariat_id", apiUrl+"general_commissariats"),
        departmentTypeDS            : dataStore("department_type_id", apiUrl+"department_types/type-by-department"),
        departmentDS                : dataStore("department_id", apiUrl+"departments"),
        officeTypeDS                : dataStore("office_type_id", apiUrl+"office_types/type-by-office"),
        officeDS                    : dataStore("office_id", apiUrl+"offices"),
        sectorTypeDS                : dataStore("sector_type_id", apiUrl+"sector_types/type-by-sector"),
        sectorDS                    : dataStore("sector_id", apiUrl+"sectors"),
        positionDS                  : dataStore("position_id", apiUrl+"positions"),
        otherPositionDS             : dataStore("position_id", apiUrl+"positions"),
        rankDS                      : dataStore("rank_id", apiUrl+"ranks"),
        statusList                  : app.source.statusList,
        announceTypeList            : app.source.announceTypeList,
        hasOrNoList                 : app.source.hasOrNoList,
        movementList                : app.source.movementList,
        genderList                  : app.source.genderList,
        filters                     : {},
        pageLoad                    : function(){
            this.search();
        },
        setDefaultFilters           : function(){
            this.departmentTypeDS.data([]);
            this.departmentDS.data([]);
            this.officeTypeDS.data([]);
            this.officeDS.data([]);
            this.sectorTypeDS.data([]);
            this.sectorDS.data([]);

            this.set("filters", {
                searchText                  : "",
                general_commissariat_id     : 0,
                department_type_id          : 0,
                department_id               : 0,
                office_type_id              : 0,
                office_id                   : 0,
                sector_type_id              : 0,
                sector_id                   : 0,
                selectedPositions           : [],
                selectedRanks               : [],
                start_dob                   : "",
                end_dob                     : "",
                start_entry                 : "",
                end_entry                   : "",
                entry_announce_type         : null,
                entry_number                : "",
                start_retired               : "",
                end_retired                 : "",
                retired_announce_type       : null,
                retired_number              : "",
                staff_status                : null,
                background                  : null,
                background_book             : null,
                payroll                     : null,//salary_status
                punistment                  : null,
                gender                      : null,
                document_movement           : null
            });
        },
        search                      : function(){
            var where = {}, filters = this.get("filters");

            //Number or name
            if(filters.searchText!==""){
                where.or = [
                    { staff_number : {like: filters.searchText} },
                    { surname_kh : {like: filters.searchText} },
                    { name_kh : {like: filters.searchText} },
                    { surname_en : {like: filters.searchText} },
                    { name_en : {like: filters.searchText} }
                ]
            }

            //Departments
            if(filters.sector_id){
                where.sector_id = filters.sector_id;
            } else if(filters.office_id){
                where.office_id = filters.office_id;
            } else if(filters.department_id){
                where.department_id = filters.department_id;
            } else if(filters.general_commissariat_id){
                where.general_commissariat_id = filters.general_commissariat_id;
            }

            //Positions
            if(filters.selectedPositions.length>0){
                var positionIds = [];
                $.each(filters.selectedPositions, function(index, value){
                    positionIds.push(value);
                });
                where.position_id = {inq: positionIds};
            }

            //Ranks
            if(filters.selectedRanks.length>0){
                var rankIds = [];
                $.each(filters.selectedRanks, function(index, value){
                    rankIds.push(value);
                });
                where.rank_id = {inq: rankIds};
            }

            //Date of birth
            if(filters.start_dob && filters.end_dob){
                where.date_of_birth = {"gte": kendo.toString(new Date(filters.start_dob), "yyyy-MM-dd")};
                where.date_of_birth = {"lte": kendo.toString(new Date(filters.end_dob), "yyyy-MM-dd")};
            }else if(filters.start_dob){
                where.date_of_birth = kendo.toString(new Date(filters.start_dob), "yyyy-MM-dd");
            }else if(filters.end_dob){
                where.date_of_birth = {"lte": kendo.toString(new Date(filters.end_dob), "yyyy-MM-dd")};
            }else{
                
            }

            //Date entry
            if(filters.start_entry && filters.end_entry){
                where.date_entried = kendo.toString(new Date(filters.start_entry), "yyyy-MM-dd");
                where.date_entried = kendo.toString(new Date(filters.end_entry), "yyyy-MM-dd");
            }else if(filters.start_entry){
                where.date_entried = kendo.toString(new Date(filters.start_entry), "yyyy-MM-dd");
            }else if(filters.end_entry){
                where.date_entried = kendo.toString(new Date(filters.end_entry), "yyyy-MM-dd");
            }else{
                
            }

            //Date retired
            if(filters.start_retired && filters.end_retired){
                where.date_retired = kendo.toString(new Date(filters.start_retired), "yyyy-MM-dd");
                where.date_retired = kendo.toString(new Date(filters.end_retired), "yyyy-MM-dd");
            }else if(filters.start_entry){
                where.date_retired = kendo.toString(new Date(filters.start_retired), "yyyy-MM-dd");
            }else if(filters.end_entry){
                where.date_retired = kendo.toString(new Date(filters.end_retired), "yyyy-MM-dd");
            }else{
                
            }

            //Status
            if(filters.staff_status){
                where.status = filters.staff_status;
            }

            //Background 
            if(filters.background){
                where.has_information = filters.background;
            }

            //Background book
            if(filters.background_book){
                where.has_history_book = filters.background_book;
            }

            //Discipline record
            if(filters.punistment){
                where.has_discipline_record = filters.punistment;
            }

            //Payroll
            if(filters.payroll){
                where.salary_status = filters.payroll;
            }

            //Document movment
            if(filters.document_movement){
                where.is_document_out = filters.document_movement;
            }

            //Gender
            if(filters.gender){
                where.gender = filters.gender;
            }

            this.dataSource.filter([
                { where },
                { include:["general_commissariats","departments","offices","sectors","ranks","positions"] }                
            ]);
            this.setDefaultFilters();
        },
        //Department Cascading        
        generalChanges          : function(){
            var self = this, obj = this.get("filters");

            obj.set("department_type_id", 0);
            obj.set("department_id", 0);
            obj.set("office_type_id", 0);
            obj.set("office_id", 0);
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.departmentTypeDS.filter({ 
                where:{
                    general_commissariat_id: obj.general_commissariat_id
                }
            });
        },
        departmentTypeChanges   : function(){
            var self = this, obj = this.get("filters");
            
            obj.set("department_id", 0);
            obj.set("office_type_id", 0);
            obj.set("office_id", 0);
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.departmentDS.filter([
                { field: "general_commissariat_id", value: obj.general_commissariat_id },
                { field: "department_type_id", value: obj.department_type_id }
            ]);
        },
        departmentChanges       : function(){
            var obj = this.get("filters");
            
            obj.set("office_type_id", 0);
            obj.set("office_id", 0);
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.officeTypeDS.filter({ 
                where:{
                    department_id: obj.department_id
                }
            });
        },
        officeTypeChanges       : function(){
            var self = this, obj = this.get("filters");
            
            obj.set("office_id", 0);
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.officeDS.filter([
                { field:"department_id", value:obj.department_id },
                { field:"office_type_id", value:obj.office_type_id }
            ]);
        },
        officeChanges           : function(){
            var obj = this.get("filters");
            
           obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.sectorTypeDS.filter({ 
                where:{
                    office_id: obj.office_id
                }
            });
        },
        sectorTypeChanges       : function(){
            var self = this, obj = this.get("filters");
            
            obj.set("sector_id", 0);

            this.sectorDS.filter([
                { field:"office_id", value:obj.office_id },
                { field:"sector_type_id", value:obj.sector_type_id }
            ]);
        }
    });
    app.staff = kendo.observable({
        dataSource              : dataStore("staff_id", apiUrl+"staffs"),
        numberDS                : dataStore("staff_id", apiUrl+"staffs"),
        generalCommissariatDS   : dataStore("general_commissariat_id", apiUrl+"general_commissariats"),
        departmentTypeDS        : dataStore("department_type_id", apiUrl+"department_types/type-by-department"),
        departmentDS            : dataStore("department_id", apiUrl+"departments"),
        officeTypeDS            : dataStore("office_type_id", apiUrl+"office_types/type-by-office"),
        officeDS                : dataStore("office_id", apiUrl+"offices"),
        sectorTypeDS            : dataStore("sector_type_id", apiUrl+"sector_types/type-by-sector"),
        sectorDS                : dataStore("sector_id", apiUrl+"sectors"),
        positionDS              : dataStore("position_id", apiUrl+"positions"),
        otherPositionDS         : dataStore("position_id", apiUrl+"positions"),
        rankDS                  : dataStore("rank_id", apiUrl+"ranks"),
        statusDS                : dataStore("status_id", apiUrl+"statuses"),
        genders                 : app.source.genderList,
        statusList              : app.source.statusList,
        hasOrNoList             : app.source.hasOrNoList,
        maritalStatusList       : app.source.maritalStatusList,
        confirmMessage          : app.source.confirmMessage,
        showConfirm             : false,
        obj                     : null,
        notDuplicateNumber      : true,
        isEdit                  : false,
        title                   : "",
        pageLoad                : function(id){
            if(id){
                this.set("title", "កែសំរួលបុគ្គលិក");
                this.set("isEdit", true);                       
                this.loadObj(id);
            }else{
                this.set("title", "បញ្ជូលបុគ្គលិកថ្មី");
                if(this.get("isEdit") || this.dataSource.total()==0){
                    this.addNew();
                }                               
            }   
        },
        //Department Cascading        
        generalChanges          : function(){
            var self = this, obj = this.get("obj");

            obj.set("department_type_id", 0);
            obj.set("department_id", 0);
            obj.set("office_type_id", 0);
            obj.set("office_id", 0);
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.departmentTypeDS.filter({ 
                where:{
                    general_commissariat_id: obj.general_commissariat_id
                }
            });
        },
        departmentTypeChanges   : function(){
            var self = this, obj = this.get("obj");
            
            obj.set("department_id", 0);
            obj.set("office_type_id", 0);
            obj.set("office_id", 0);
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.departmentDS.filter([
                { field: "general_commissariat_id", value: obj.general_commissariat_id },
                { field: "department_type_id", value: obj.department_type_id }
            ]);
        },
        departmentChanges       : function(){
            var obj = this.get("obj");
            
            obj.set("office_type_id", 0);
            obj.set("office_id", 0);
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.officeTypeDS.filter({ 
                where:{
                    department_id: obj.department_id
                }
            });
        },
        officeTypeChanges       : function(){
            var self = this, obj = this.get("obj");
            
            obj.set("office_id", 0);
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.officeDS.filter([
                { field:"department_id", value:obj.department_id },
                { field:"office_type_id", value:obj.office_type_id }
            ]);
        },
        officeChanges           : function(){
            var obj = this.get("obj");
            
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.sectorTypeDS.filter({ 
                where:{
                    office_id: obj.office_id
                }
            });
        },
        sectorTypeChanges       : function(){
            var self = this, obj = this.get("obj");
            
            obj.set("sector_id", 0);

            this.sectorDS.filter([
                { field:"office_id", value:obj.office_id },
                { field:"sector_type_id", value:obj.sector_type_id }
            ]);
        },
        //Number        
        checkExistingNumber     : function(){
            var self = this, para = [], 
            obj = this.get("obj");

            if(obj.staff_number!==""){

                if(obj.isNew()==false){
                    para.push({ field:"staff_id <>", value: obj.id });
                }
                
                para.push({ field:"staff_number", value: obj.staff_number });
                
                this.numberDS.query({
                    filter: para,
                    page: 1,
                    pageSize: 1
                }).then(function(e){
                    var view = self.numberDS.view();

                    if(view.length>0){
                        self.set("notDuplicateNumber", false);
                    }else{
                        self.set("notDuplicateNumber", true);
                    }
                });
            }
        },
        //Obj
        loadObj                 : function(id){
            var self = this;

            this.dataSource.query({
                filter: { field:"staff_id", value:id },
                page: 1,
                pageSize: 1
            }).then(function(e){
                var view = self.dataSource.view();

                self.set("obj", view[0]);
            });
        },
        addNew                  : function(){
            var self = this;
            this.dataSource.data([]);

            this.set("isEdit", false);
            
            this.dataSource.insert(0, {
                general_commissariat_id         : 0,
                department_type_id              : 0,
                department_id                   : 0,
                office_type_id                  : 0,
                office_id                       : 0,
                sector_type_id                  : 0,
                sector_id                       : 0,
                position_id                     : 0,
                other_position_id               : 0,
                rank_id                         : 0,
                staff_number                    : "",
                surname_kh                      : "",
                name_kh                         : "",
                surname_en                      : "",
                name_en                         : "",
                // date_of_birth                   : new Date(0),                
                nationality                     : "",
                has_history_book                : 0,
                religion                        : "",
                phone                           : "",
                email                           : "",
                address                         : "",
                place_of_birth                  : "",
                body_shape                      : "",
                skin_color                      : "",
                height                          : "",
                weight                          : "",
                qualification                   : "",
                other_skills                    : "",
                language                        : "",                
                marital_status                  : 1,
                children_amount                 : 0,
                spouse_name                     : "",
                spouse_birthday                 : "",
                spouse_job                      : "",
                spouse_address                  : "",
                father_name                     : "",
                father_birthday                 : "",
                father_job                      : "",
                father_address                  : "",
                mother_name                     : "",
                mother_birthday                 : "",
                mother_job                      : "",
                mother_address                  : "",
                // date_entried                    : new Date(0),
                status_id                       : 2
            });

            var obj = this.dataSource.at(0);
            this.set("obj", obj);
        },
        objSync                 : function(){
            var dfd = $.Deferred();         

            this.dataSource.sync();
            this.dataSource.bind("requestEnd", function(e){
                if(e.response){             
                    dfd.resolve(e.response.results);
                }                               
            });
            this.dataSource.bind("error", function(e){                          
                dfd.reject(e.errorThrown);                  
            });

            return dfd;                     
        },
        save                    : function(){
            var self = this, obj = this.get("obj");

            //Save Obj
            this.objSync()
            .then(function(data){ //Success
                if(self.get("isEdit")==false){

                }

                return data;
            }, function(reason) { //Error
                $("#ntf1").data("kendoNotification").error(reason);
            }).then(function(result){               
                $("#ntf1").data("kendoNotification").success(app.source.successMessage);

                if(self.get("saveClose")){
                    //Save Close
                    self.set("saveClose", false);
                    self.cancel();
                    window.history.back();
                }else{
                    //Save New
                    self.addNew();
                }
            });
        },
        cancel                  : function(){
            this.dataSource.cancelChanges();
            this.dataSource.data([]);
        },
        delete                  : function(){
            var obj = this.get("obj");
            this.set("showConfirm",false);
            
            obj.set("deleted", 1);
            this.dataSource.sync();
            var saved = false;
            this.dataSource.bind("requestEnd", function(e){
                if(e.type==="update" && saved===false){
                    saved = true;

                    window.history.back();
                }
            });
        },
        openConfirm             : function(){
            this.set("showConfirm", true);
        },
        closeConfirm            : function(){
            this.set("showConfirm", false);
        }
    });
    app.departmentRecord = kendo.observable({
        dataSource              : dataStore("department_record_id", apiUrl+"department_records"),
        numberDS                : dataStore("department_record_id", apiUrl+"department_records"),
        generalCommissariatDS   : dataStore("general_commissariat_id", apiUrl+"general_commissariats"),
        departmentTypeDS        : dataStore("department_type_id", apiUrl+"department_types/type-by-department"),
        departmentDS            : dataStore("department_id", apiUrl+"departments"),
        officeTypeDS            : dataStore("office_type_id", apiUrl+"office_types/type-by-office"),
        officeDS                : dataStore("office_id", apiUrl+"offices"),
        sectorTypeDS            : dataStore("sector_type_id", apiUrl+"sector_types/type-by-sector"),
        sectorDS                : dataStore("sector_id", apiUrl+"sectors"),
        positionDS              : dataStore("position_id", apiUrl+"positions"),
        otherPositionDS         : dataStore("position_id", apiUrl+"positions"),
        rankDS                  : dataStore("rank_id", apiUrl+"ranks"),
        newGeneralCommissariatDS: dataStore("general_commissariat_id", apiUrl+"general_commissariats"),
        newDepartmentTypeDS     : dataStore("department_type_id", apiUrl+"department_types/type-by-department"),
        newDepartmentDS         : dataStore("department_id", apiUrl+"departments"),
        newOfficeTypeDS         : dataStore("office_type_id", apiUrl+"office_types/type-by-office"),
        newOfficeDS             : dataStore("office_id", apiUrl+"offices"),
        newSectorTypeDS         : dataStore("sector_type_id", apiUrl+"sector_types/type-by-sector"),
        newSectorDS             : dataStore("sector_id", apiUrl+"sectors"),
        newPositionDS           : dataStore("position_id", apiUrl+"positions"),
        newOtherPositionDS      : dataStore("position_id", apiUrl+"positions"),
        newRankDS               : dataStore("rank_id", apiUrl+"ranks"),
        statusDS                : dataStore("status_id", apiUrl+"statuses"),
        announceTypeDS          : dataStore("announce_type_id", apiUrl+"announce_types"),
        staffDS                 : dataStore("staff_id", apiUrl+"staffs"),
        genders                 : app.source.genderList,
        statusList              : app.source.statusList,
        hasOrNoList             : app.source.hasOrNoList,
        maritalStatusList       : app.source.maritalStatusList,
        confirmMessage          : app.source.confirmMessage,
        showConfirm             : false,
        obj                     : null,
        notDuplicateNumber      : true,
        isEdit                  : false,     
        pageLoad                : function(id){
            if(id){
                this.set("isEdit", true);                       
                this.loadObj(id);
            }else{
                if(this.get("isEdit") || this.dataSource.total()==0){
                    this.setObj();
                }                               
            }   
        },
        //Department Cascading        
        generalChanges          : function(){
            var self = this, obj = this.get("obj");

            obj.set("department_type_id", 0);
            obj.set("department_id", 0);
            obj.set("office_type_id", 0);
            obj.set("office_id", 0);
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.departmentTypeDS.filter({ 
                where:{
                    general_commissariat_id: obj.general_commissariat_id
                }
            });
        },
        departmentTypeChanges   : function(){
            var self = this, obj = this.get("obj");
            
            obj.set("department_id", 0);
            obj.set("office_type_id", 0);
            obj.set("office_id", 0);
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.departmentDS.filter([
                { field: "general_commissariat_id", value: obj.general_commissariat_id },
                { field: "department_type_id", value: obj.department_type_id }
            ]);
        },
        departmentChanges       : function(){
            var obj = this.get("obj");
            
            obj.set("office_type_id", 0);
            obj.set("office_id", 0);
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.officeTypeDS.filter({ 
                where:{
                    department_id: obj.department_id
                }
            });
        },
        officeTypeChanges       : function(){
            var self = this, obj = this.get("obj");
            
            obj.set("office_id", 0);
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.officeDS.filter([
                { field:"department_id", value:obj.department_id },
                { field:"office_type_id", value:obj.office_type_id }
            ]);
        },
        officeChanges           : function(){
            var obj = this.get("obj");
            
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.sectorTypeDS.filter({ 
                where:{
                    office_id: obj.office_id
                }
            });
        },
        sectorTypeChanges       : function(){
            var self = this, obj = this.get("obj");
            
            obj.set("sector_id", 0);

            this.sectorDS.filter([
                { field:"office_id", value:obj.office_id },
                { field:"sector_type_id", value:obj.sector_type_id }
            ]);
        },
        //New department Cascading
        newGeneralChanges       : function(){
            var self = this, obj = this.get("obj");

            obj.set("new_department_type_id", 0);
            obj.set("new_department_id", 0);
            obj.set("new_office_type_id", 0);
            obj.set("new_office_id", 0);
            obj.set("new_sector_type_id", 0);
            obj.set("new_sector_id", 0);

            this.newDepartmentTypeDS.filter({ 
                where:{
                    general_commissariat_id: obj.new_general_commissariat_id
                }
            });
        },
        newDepartmentTypeChanges: function(){
            var self = this, obj = this.get("obj");
            
            obj.set("new_department_id", 0);
            obj.set("new_office_type_id", 0);
            obj.set("new_office_id", 0);
            obj.set("new_sector_type_id", 0);
            obj.set("new_sector_id", 0);

            this.newDepartmentDS.filter([
                { field: "general_commissariat_id", value: obj.new_general_commissariat_id },
                { field: "department_type_id", value: obj.new_department_type_id }
            ]);
        },
        newDepartmentChanges    : function(){
            var obj = this.get("obj");
            
            obj.set("new_office_type_id", 0);
            obj.set("new_office_id", 0);
            obj.set("new_sector_type_id", 0);
            obj.set("new_sector_id", 0);

            this.newOfficeTypeDS.filter({ 
                where:{
                    department_id: obj.new_department_id
                }
            });
        },
        newOfficeTypeChanges    : function(){
            var self = this, obj = this.get("obj");
            
            obj.set("new_office_id", 0);
            obj.set("new_sector_type_id", 0);
            obj.set("new_sector_id", 0);

            this.newOfficeDS.filter([
                { field:"department_id", value:obj.new_department_id },
                { field:"office_type_id", value:obj.new_office_type_id }
            ]);
        },
        newOfficeChanges        : function(){
            var obj = this.get("obj");
            
            obj.set("new_sector_type_id", 0);
            obj.set("new_sector_id", 0);

            this.newSectorTypeDS.filter({ 
                where:{
                    office_id: obj.new_office_id
                }
            });
        },
        newSectorTypeChanges    : function(){
            var self = this, obj = this.get("obj");
            
            obj.set("new_sector_id", 0);

            this.newSectorDS.filter([
                { field:"office_id", value:obj.new_office_id },
                { field:"sector_type_id", value:obj.new_sector_type_id }
            ]);
        },
        //Number        
        checkExistingNumber     : function(){
            var self = this, para = [], 
                obj = this.get("obj");

            if(obj.announce_number!==""){

                if(obj.isNew()==false){
                    para.push({ field:"department_record_id <>", value: obj.id });
                }
                
                para.push({ field:"staff_id", value: obj.staff_id });
                para.push({ field:"announce_number", value: obj.announce_number });
                
                this.numberDS.query({
                    filter: para,
                    page: 1,
                    pageSize: 1
                }).then(function(e){
                    var view = self.numberDS.view();

                    if(view.length>0){
                        self.set("notDuplicateNumber", false);
                    }else{
                        self.set("notDuplicateNumber", true);
                    }
                });
            }
        },
        //Table
        addRow                  : function(){
            this.dataSource.add({
                general_commissariat_id         : 0,
                department_type_id              : 0,
                department_id                   : 0,
                office_type_id                  : 0,
                office_id                       : 0,
                sector_type_id                  : 0,
                sector_id                       : 0,
                position_id                     : 0,
                other_position_id               : 0,
                rank_id                         : 0,

                new_general_commissariat_id     : 0,
                new_department_type_id          : 0,
                new_department_id               : 0,
                new_office_type_id              : 0,
                new_office_id                   : 0,
                new_sector_type_id              : 0,
                new_sector_id                   : 0,
                new_position_id                 : 0,
                new_other_position_id           : 0,
                new_rank_id                     : 0,

                staff_id                        : "",
                announce_type_id                : 0,
                announce_number                 : "",
                date_announce                   : "",
                memo                            : "",

                staffs                          : { staff_number:"", surname_kh:"", name_kh:"" }
            });

            var obj = this.dataSource.at(0);
            this.set("obj", obj);
        },
        //Obj
        setObj                  : function(){
            this.set("isEdit", false);
            this.dataSource.data([]);

            this.departmentTypeDS.data([]);
            this.departmentDS.data([]);
            this.officeTypeDS.data([]);
            this.officeDS.data([]);
            this.sectorTypeDS.data([]);
            this.sectorDS.data([]);

            this.newDepartmentTypeDS.data([]);
            this.newDepartmentDS.data([]);
            this.newOfficeTypeDS.data([]);
            this.newOfficeDS.data([]);
            this.newSectorTypeDS.data([]);
            this.newSectorDS.data([]);
            
            var obj = {
                general_commissariat_id         : 0,
                department_type_id              : 0,
                department_id                   : 0,
                office_type_id                  : 0,
                office_id                       : 0,
                sector_type_id                  : 0,
                sector_id                       : 0,
                position_id                     : 0,
                other_position_id               : 0,
                rank_id                         : 0,

                new_general_commissariat_id     : 0,
                new_department_type_id          : 0,
                new_department_id               : 0,
                new_office_type_id              : 0,
                new_office_id                   : 0,
                new_sector_type_id              : 0,
                new_sector_id                   : 0,
                new_position_id                 : 0,
                new_other_position_id           : 0,
                new_rank_id                     : 0,

                staff_id                        : "",
                announce_type_id                : 0,
                document_number                 : "",
                announce_number                 : "",
                date_announce                   : "",
                memo                            : ""
            };

            this.set("obj", obj);
            this.addRow();
        },
        loadObj                 : function(id){
            var self = this;

            this.dataSource.query({
                filter: { field:"staff_id", value:id },
                page: 1,
                pageSize: 1
            }).then(function(e){
                var view = self.dataSource.view();

                self.set("obj", view[0]);
            });
        },
        objSync                 : function(){
            var dfd = $.Deferred();         

            this.dataSource.sync();
            this.dataSource.bind("requestEnd", function(e){
                if(e.response){             
                    dfd.resolve(e.response.results);
                }                               
            });
            this.dataSource.bind("error", function(e){                          
                dfd.reject(e.errorThrown);                  
            });

            return dfd;                     
        },
        save                    : function(){
            var self = this, obj = this.get("obj");

            //Parse date
            var parts = obj.date_announce.split("-");
            var dt = new Date(parseInt(parts[2], 10),
                  parseInt(parts[1], 10) - 1,
                  parseInt(parts[0], 10));
            
            obj.set("date_announce", kendo.toString(dt, "yyyy-MM-dd"));

            if(this.dataSource.total()>0){
                $.each(this.dataSource.data(), function(index, value){
                    value.set("general_commissariat_id", obj.general_commissariat_id);
                    value.set("department_type_id", obj.department_type_id);
                    value.set("department_id", obj.department_id); 
                    value.set("office_type_id", obj.office_type_id);
                    value.set("office_id", obj.office_id);
                    value.set("sector_type_id", obj.sector_type_id);
                    value.set("sector_id", obj.sector_id);
                    value.set("position_id", obj.position_id);
                    value.set("other_position_id", obj.other_position_id);
                    value.set("rank_id", obj.rank_id);

                    value.set("new_general_commissariat_id", obj.new_general_commissariat_id);
                    value.set("new_department_type_id", obj.new_department_type_id);
                    value.set("new_department_id", obj.new_department_id);
                    value.set("new_office_type_id", obj.new_office_type_id);
                    value.set("new_office_id", obj.new_office_id);
                    value.set("new_sector_type_id", obj.new_sector_type_id);
                    value.set("new_sector_id", obj.new_sector_id);
                    value.set("new_position_id", obj.new_position_id);
                    value.set("new_other_position_id", obj.new_other_position_id);
                    value.set("new_rank_id", obj.new_rank_id);

                    value.set("staff_id", value.staffs.id);
                    value.set("announce_type_id", obj.announce_type_id);
                    value.set("announce_number", obj.announce_number);
                    value.set("document_number", obj.document_number);
                    value.set("date_announce", obj.date_announce);
                    value.set("memo", obj.memo);
                });
            }

            //Save Obj
            this.objSync()
            .then(function(data){ //Success
                if(self.get("isEdit")==false){

                }

                return data;
            }, function(reason) { //Error
                $("#ntf1").data("kendoNotification").error(reason);
            }).then(function(result){               
                $("#ntf1").data("kendoNotification").success(app.source.successMessage);

                if(self.get("saveClose")){
                    //Save Close
                    self.set("saveClose", false);
                    self.cancel();
                    window.history.back();
                }else{
                    //Save New
                    self.setObj();
                }
            });
        },
        cancel                  : function(){
            this.dataSource.cancelChanges();
            this.dataSource.data([]);
        },
        delete                  : function(){
            var obj = this.get("obj");
            this.set("showConfirm",false);
            
            obj.set("deleted", 1);
            this.dataSource.sync();
            var saved = false;
            this.dataSource.bind("requestEnd", function(e){
                if(e.type==="update" && saved===false){
                    saved = true;

                    window.history.back();
                }
            });
        },
        openConfirm             : function(){
            this.set("showConfirm", true);
        },
        closeConfirm            : function(){
            this.set("showConfirm", false);
        }
    });
    app.dateOfBirthReport = kendo.observable({
        dataSource                  : dataStore("staff_id", apiUrl + "staffs"),
        generalCommissariatDS       : dataStore("general_commissariat_id", apiUrl+"general_commissariats"),
        departmentTypeDS            : dataStore("department_type_id", apiUrl+"department_types/type-by-department"),
        departmentDS                : dataStore("department_id", apiUrl+"departments"),
        officeTypeDS                : dataStore("office_type_id", apiUrl+"office_types/type-by-office"),
        officeDS                    : dataStore("office_id", apiUrl+"offices"),
        sectorTypeDS                : dataStore("sector_type_id", apiUrl+"sector_types/type-by-sector"),
        sectorDS                    : dataStore("sector_id", apiUrl+"sectors"),
        positionDS                  : dataStore("position_id", apiUrl+"positions"),
        otherPositionDS             : dataStore("position_id", apiUrl+"positions"),
        rankDS                      : dataStore("rank_id", apiUrl+"ranks"),
        statusList                  : app.source.statusList,
        announceTypeList            : app.source.announceTypeList,
        hasOrNoList                 : app.source.hasOrNoList,
        movementList                : app.source.movementList,
        genderList                  : app.source.genderList,
        filters                     : {},
        pageLoad                    : function(){
            this.search();
        },
        setDefaultFilters           : function(){
            this.set("filters", {
                searchText                  : "",
                general_commissariat_id     : 0,
                department_type_id          : 0,
                department_id               : 0,
                office_type_id              : 0,
                office_id                   : 0,
                sector_type_id              : 0,
                sector_id                   : 0,
                selectedPositions           : [],
                selectedRanks               : [],
                start_dob                   : "",
                end_dob                     : "",
                start_entry                 : "",
                end_entry                   : "",
                entry_announce_type         : null,
                entry_number                : "",
                start_retired               : "",
                end_retired                 : "",
                retired_announce_type       : null,
                retired_number              : "",
                staff_status                : null,
                background                  : null,
                background_book             : null,
                payroll                     : null,//salary_status
                punistment                  : null,
                gender                      : null,
                document_movement           : null
            });
        },
        search                      : function(){
            var where = {}, filters = this.get("filters");

            //Departments
            if(filters.sector_id){
                where.sector_id = filters.sector_id;
            } else if(filters.office_id){
                where.office_id = filters.office_id;
            } else if(filters.department_id){
                where.department_id = filters.department_id;
            } else if(filters.general_commissariat_id){
                where.general_commissariat_id = filters.general_commissariat_id;
            }

            //Positions
            if(filters.selectedPositions.length>0){
                var positionIds = [];
                $.each(filters.selectedPositions, function(index, value){
                    positionIds.push(value);
                });
                where.position_id = {inq: positionIds};
            }

            //Ranks
            if(filters.selectedRanks.length>0){
                var rankIds = [];
                $.each(filters.selectedRanks, function(index, value){
                    rankIds.push(value);
                });
                where.rank_id = {inq: rankIds};
            }

            //Number name
            if(filters.searchText!==""){
                where.or = [
                    { staff_number : filters.searchText },
                    { surname_kh : filters.searchText },
                    { name_kh : filters.searchText },
                    { surname_en : filters.searchText },
                    { name_en : filters.searchText }
                ]
            }

            //Date of birth
            if(filters.start_dob && filters.end_dob){
                where.date_of_birth = {"gte": kendo.toString(new Date(filters.start_dob), "yyyy-MM-dd")};
                where.date_of_birth = {"lte": kendo.toString(new Date(filters.end_dob), "yyyy-MM-dd")};
            }else if(filters.start_dob){
                where.date_of_birth = kendo.toString(new Date(filters.start_dob), "yyyy-MM-dd");
            }else if(filters.end_dob){
                where.date_of_birth = {"lte": kendo.toString(new Date(filters.end_dob), "yyyy-MM-dd")};
            }else{
                
            }

            //Date entry
            if(filters.start_entry && filters.end_entry){
                where.date_entried = kendo.toString(new Date(filters.start_entry), "yyyy-MM-dd");
                where.date_entried = kendo.toString(new Date(filters.end_entry), "yyyy-MM-dd");
            }else if(filters.start_entry){
                where.date_entried = kendo.toString(new Date(filters.start_entry), "yyyy-MM-dd");
            }else if(filters.end_entry){
                where.date_entried = kendo.toString(new Date(filters.end_entry), "yyyy-MM-dd");
            }else{
                
            }

            //Date retired
            if(filters.start_retired && filters.end_retired){
                where.date_retired = kendo.toString(new Date(filters.start_retired), "yyyy-MM-dd");
                where.date_retired = kendo.toString(new Date(filters.end_retired), "yyyy-MM-dd");
            }else if(filters.start_entry){
                where.date_retired = kendo.toString(new Date(filters.start_retired), "yyyy-MM-dd");
            }else if(filters.end_entry){
                where.date_retired = kendo.toString(new Date(filters.end_retired), "yyyy-MM-dd");
            }else{
                
            }

            //Status
            if(filters.staff_status){
                where.status = filters.staff_status;
            }

            //Background 
            if(filters.background){
                where.has_information = filters.background;
            }

            //Background book
            if(filters.background_book){
                where.has_history_book = filters.background_book;
            }

            //Discipline record
            if(filters.punistment){
                where.has_discipline_record = filters.punistment;
            }

            //Payroll
            if(filters.payroll){
                where.salary_status = filters.payroll;
            }

            //Document movment
            if(filters.document_movement){
                where.is_document_out = filters.document_movement;
            }

            //Gender
            if(filters.gender){
                where.gender = filters.gender;
            }

            this.dataSource.filter([
                { where },
                { include:["general_commissariats","departments","offices","sectors","ranks","positions"] }                
            ]);
            this.setDefaultFilters();
        },
        //Department Cascading        
        generalChanges          : function(){
            var self = this, obj = this.get("filters");

            obj.set("department_type_id", 0);
            obj.set("department_id", 0);
            obj.set("office_type_id", 0);
            obj.set("office_id", 0);
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.departmentTypeDS.filter({ 
                where:{
                    general_commissariat_id: obj.general_commissariat_id
                }
            });
        },
        departmentTypeChanges   : function(){
            var self = this, obj = this.get("filters");
            
            obj.set("department_id", 0);
            obj.set("office_type_id", 0);
            obj.set("office_id", 0);
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.departmentDS.filter([
                { field: "general_commissariat_id", value: obj.general_commissariat_id },
                { field: "department_type_id", value: obj.department_type_id }
            ]);
        },
        departmentChanges       : function(){
            var obj = this.get("filters");
            
            obj.set("office_type_id", 0);
            obj.set("office_id", 0);
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.officeTypeDS.filter({ 
                where:{
                    department_id: obj.department_id
                }
            });
        },
        officeTypeChanges       : function(){
            var self = this, obj = this.get("filters");
            
            obj.set("office_id", 0);
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.officeDS.filter([
                { field:"department_id", value:obj.department_id },
                { field:"office_type_id", value:obj.office_type_id }
            ]);
        },
        officeChanges           : function(){
            var obj = this.get("filters");
            
            obj.set("sector_type_id", 0);
            obj.set("sector_id", 0);

            this.sectorTypeDS.filter({ 
                where:{
                    office_id: obj.office_id
                }
            });
        },
        sectorTypeChanges       : function(){
            var self = this, obj = this.get("filters");
            
            obj.set("sector_id", 0);

            this.sectorDS.filter([
                { field:"office_id", value:obj.office_id },
                { field:"sector_type_id", value:obj.sector_type_id }
            ]);
        }
    });


    
    /* Views & Layout */
    app.view = {
        layout      : new kendo.Layout('#layout', {model: app.Layout}),
        blank       : new kendo.View('<div></div>'),
        index       : new kendo.Layout("#index", {model: app.index}),
        menu        : new kendo.Layout('#menu-tmpl'),       

        //Users
        users       : new kendo.Layout("#users", {model: app.users}),

        //Personal Department Home
        personalDepartmentHome: new kendo.Layout("#personalDepartmentHome", {model: app.personalDepartmentHome}),

        //K8
        k8Home: new kendo.Layout("#k8Home", {model: app.k8Home}),
        k8Center: new kendo.Layout("#k8Center", {model: app.k8Center}),
        staff: new kendo.Layout("#staff", {model: app.staff}),
        departmentRecord: new kendo.Layout("#departmentRecord", {model: app.departmentRecord}),
        k8ReportCenter: new kendo.Layout("#k8ReportCenter", {model: app.k8ReportCenter}),
        dateOfBirthReport: new kendo.Layout("#dateOfBirthReport", {model: app.dateOfBirthReport}),
        
        //Menu
        k8Menu: new kendo.View("#k8Menu")
    };
    app.router = new kendo.Router({
        init: function() {
            $('#home-menu').addClass('active');
            app.view.layout.render("#wrapperApplication");
            var blank = new kendo.View('#blank-tmpl');
            app.view.layout.showIn('#menu', app.view.menu);
        },
        routeMissing: function(e) {
            // app.view.layout.showIn("#layout-view", app.view.missing);
            console.log("no resource found.");
        }
    });
    /* Home Page */
    app.router.route('/', function(){
        var blank = new kendo.View('#blank-tmpl');
        app.view.layout.showIn('#content', app.view.index);
        app.view.layout.showIn('#menu', app.view.menu);
        $("#secondary-menu").html("");
        app.pageLoaded["home"] = true;
    });
    
    //Users
    app.router.route("/users", function(){                 
        app.view.layout.showIn("#content", app.view.users);
        app.view.menu.showIn('#secondary-menu', app.view.k8Menu);

        var vm = app.users;

        if(app.pageLoaded["users"]==undefined){
            app.pageLoaded["users"] = true;                

        }

        $("#secondary-menu").kendoMenu({
            select: function (e) {
                // Remove previously selected options for this menu
                $(".k-state-selected", this.element).removeClass("k-state-selected");
                // Select item
                $(e.item).addClass("k-state-selected")
            }
        });

        vm.pageLoad();        
    });

    //Personal Department
    app.router.route("/personal_department_home", function(){        
        var vm = app.staff;
        app.view.layout.showIn("#content", app.view.personalDepartmentHome);
                    
        if(app.pageLoaded["personal_department_home"]==undefined){
            app.pageLoaded["personal_department_home"] = true;
            
        }

        vm.pageLoad();        
    });


    /*************************
    *   K8 Section        *
    **************************/
    app.router.route("/k8_home", function(){                 
        app.view.layout.showIn("#content", app.view.k8Home);
        app.view.menu.showIn('#secondary-menu', app.view.k8Menu);

        var vm = app.k8Home;

        if(app.pageLoaded["k8_home"]==undefined){
            app.pageLoaded["k8_home"] = true;                

        }

        $("#secondary-menu").kendoMenu({
            select: function (e) {
                // Remove previously selected options for this menu
                $(".k-state-selected", this.element).removeClass("k-state-selected");
                // Select item
                $(e.item).addClass("k-state-selected")
            }
        });

        vm.pageLoad();        
    });
    app.router.route("/k8_center", function(){
        if(Object.keys(app.pageLoaded).length>0){
            app.view.layout.showIn("#content", app.view.k8Center);
            app.view.menu.showIn('#secondary-menu', app.view.k8Menu);

            var vm = app.k8Center;

            if(app.pageLoaded["k8_center"]==undefined){
                app.pageLoaded["k8_center"] = true;              

                vm.setDefaultFilters();
            }

            vm.pageLoad();
        }else{
            app.router.navigate('/k8_home');
        }       
    });
    app.router.route("/staff(/:id)", function(id){
        if(Object.keys(app.pageLoaded).length>0){                
            app.view.layout.showIn("#content", app.view.staff);            
            var vm = app.staff;
            
            if(app.pageLoaded["staff"]==undefined){
                app.pageLoaded["staff"] = true;
                
                var validator = $("#example").kendoValidator({
                    rules: {
                        customRule1: function(input){
                            if (input.is("[name=txtNumber]")) { 
                                return vm.get("notDuplicateNumber");
                            }
                            return true;
                        }
                    },
                    messages: {
                        customRule1: app.source.duplicateNumber
                    }
                }).data("kendoValidator");
                                                
                $("#saveNew").click(function(e){                
                    e.preventDefault();

                    if(validator.validate()){
                        vm.save();                                    
                    }else{
                        $("#ntf1").data("kendoNotification").error(app.source.errorMessage);
                    }                   
                });

                $("#saveClose").click(function(e){              
                    e.preventDefault();

                    if(validator.validate()){
                        vm.set("saveClose", true);
                        vm.save();                      
                    }else{
                        $("#ntf1").data("kendoNotification").error(app.source.errorMessage);
                    }
                });
            }

            vm.pageLoad(id);
        }else{
            app.router.navigate('/k8_home');
        }
    });
    app.router.route("/deparment_record", function(){
        if(Object.keys(app.pageLoaded).length>0){                
            app.view.layout.showIn("#content", app.view.departmentRecord);            
            var vm = app.departmentRecord;
            
            if(app.pageLoaded["deparment_record"]==undefined){
                app.pageLoaded["deparment_record"] = true;
                
                var validator = $("#example").kendoValidator({
                    rules: {
                        customRule1: function(input){
                            if (input.is("[name=txtNumber]")) { 
                                return vm.get("notDuplicateNumber");
                            }
                            return true;
                        }
                    },
                    messages: {
                        customRule1: app.source.duplicateNumber
                    }
                }).data("kendoValidator");
                                                
                $("#saveNew").click(function(e){                
                    e.preventDefault();

                    if(validator.validate()){
                        vm.save();                                    
                    }else{
                        $("#ntf1").data("kendoNotification").error(app.source.errorMessage);
                    }                   
                });

                $("#saveClose").click(function(e){              
                    e.preventDefault();

                    if(validator.validate()){
                        vm.set("saveClose", true);
                        vm.save();                      
                    }else{
                        $("#ntf1").data("kendoNotification").error(app.source.errorMessage);
                    }
                });
            }

            vm.pageLoad();
        }else{
            app.router.navigate('/k8_home');
        }
    });
    app.router.route("/k8_report_center", function(){                 
        app.view.layout.showIn("#content", app.view.k8ReportCenter);
        app.view.menu.showIn('#secondary-menu', app.view.k8Menu);

        var vm = app.k8ReportCenter;

        if(app.pageLoaded["k8_report_center"]==undefined){
            app.pageLoaded["k8_report_center"] = true;                

        }
        vm.pageLoad();        
    });
    app.router.route("/date_of_birth_report", function(){
        if(Object.keys(app.pageLoaded).length>0){
            app.view.layout.showIn("#content", app.view.dateOfBirthReport);

            var vm = app.dateOfBirthReport;

            if(app.pageLoaded["date_of_birth_report"]==undefined){
                app.pageLoaded["date_of_birth_report"] = true;              

                vm.setDefaultFilters();
            }

            vm.pageLoad();
        }else{
            app.router.navigate('/k8_home');
        }       
    });


    $(function() {
        app.router.start();
        
        // $.get('http://localhost:3000/api/tokens?filter[where][aspnet_id]=14', function(res) {
        //     if(res.data.length>0){
        //         app.userData = res.data[0];
        //     }
        // },'json');
    });
</script>

<!-- Start UI JS APP -->
<script type="text/javascript" src="assets/js/app.js"></script>

</body>
</html>